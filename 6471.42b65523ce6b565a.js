"use strict";(self.webpackChunkintswap_frontend=self.webpackChunkintswap_frontend||[]).push([[6471],{86471:(q,u,a)=>{a.r(u),a.d(u,{RoyaltyRatioModule:()=>S});var p=a(88692),d=a(7976),f=a(92673),x=a(61528),v=a(42147),t=a(64537),C=a(19376),b=a(96195),c=a(17558),l=a(20092),_=a(83331),h=a(9638),y=a(93706),g=a(25126),m=a(99369);function M(e,r){1&e&&(t.TgZ(0,"div",4)(1,"mat-icon",5),t._uU(2,"autorenew"),t.qZA()())}function R(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Revise"),t.qZA())}function w(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Description"),t.qZA())}function O(e,r){1&e&&(t.TgZ(0,"span"),t._uU(1,"Review"),t.qZA())}function P(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",18)(1,"div",19)(2,"div",20),t._uU(3,"New Royalty Ratio :"),t.qZA(),t.TgZ(4,"div",21)(5,"nz-input-number",22),t.NdJ("ngModelChange",function(o){t.CHM(n);const s=t.oxw(2);return t.KtG(s.newRoyaltyRatio=o)}),t.qZA()(),t.TgZ(6,"button",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.goToStep(1))}),t._uU(7,"Next"),t.qZA()()()}if(2&e){const n=t.oxw(2);t.xp6(5),t.Q6J("nzSize","large")("nzMin",0)("nzMax",100)("nzStep",.01)("ngModel",n.newRoyaltyRatio)("nzFormatter",n.formatterPercent)("nzPrecision",4)}}function Z(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",18)(1,"div",24)(2,"div",25),t._uU(3,"Title :"),t.qZA(),t.TgZ(4,"div",26),t._uU(5),t.qZA(),t.TgZ(6,"div",25),t._uU(7,"Description :"),t.qZA(),t.TgZ(8,"div",26)(9,"nz-textarea-count",27)(10,"textarea",28),t.NdJ("ngModelChange",function(o){t.CHM(n);const s=t.oxw(2);return t.KtG(s.description=o)}),t.qZA()()(),t.TgZ(11,"div",25),t._uU(12,"Delay :"),t.qZA(),t.TgZ(13,"div",26),t._uU(14,"3 days"),t.qZA(),t.TgZ(15,"button",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.goToStep(0))}),t._uU(16,"Prev"),t.qZA(),t.TgZ(17,"button",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.goToStep(2))}),t._uU(18,"Next"),t.qZA()()()}if(2&e){const n=t.oxw(2);t.xp6(5),t.AsE("Request Readjust ",n.pair.collection.symbol,"&",n.pair.token.symbol," Royalty Ratio "),t.xp6(4),t.Q6J("nzMaxCharacterCount",100),t.xp6(1),t.Q6J("ngModel",n.description)("nzStatus",n.description.length>100?"error":"")}}function T(e,r){if(1&e){const n=t.EpF();t.TgZ(0,"div",18)(1,"div",29)(2,"h2"),t._uU(3),t.qZA(),t.TgZ(4,"div",30),t._uU(5,"Application Date :"),t.qZA(),t.TgZ(6,"div",31),t._uU(7),t.ALo(8,"date"),t.qZA(),t.TgZ(9,"div",30),t._uU(10,"Effective Date :"),t.qZA(),t.TgZ(11,"div",31),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"div",30),t._uU(15,"New Royalty Ratio :"),t.qZA(),t.TgZ(16,"div",31),t._uU(17),t.ALo(18,"number"),t.qZA(),t.TgZ(19,"div",30),t._uU(20,"Description :"),t.qZA(),t.TgZ(21,"div",31)(22,"p"),t._uU(23),t.qZA()()(),t.TgZ(24,"div",32)(25,"button",23),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.goToStep(1))}),t._uU(26,"Prev"),t.qZA(),t.TgZ(27,"button",33),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(2);return t.KtG(o.applyRequest())}),t._uU(28,"Done"),t.qZA()()()}if(2&e){const n=t.oxw(2);t.xp6(3),t.AsE("Request Readjust ",n.pair.collection.symbol,"&",n.pair.token.symbol," Royalty Ratio"),t.xp6(4),t.Oqu(t.xi3(8,6,n.now,"y-M-dd HH:mm:ss")),t.xp6(5),t.Oqu(t.xi3(13,9,n.now+2592e5,"y-M-dd HH:mm:ss")),t.xp6(5),t.hij("",t.xi3(18,12,n.newRoyaltyRatio,"1.2-4")," % "),t.xp6(6),t.Oqu(n.description||"no description.")}}function z(e,r){if(1&e&&(t.TgZ(0,"div",6)(1,"h1"),t._uU(2),t.qZA(),t.TgZ(3,"div",7)(4,"div",8),t._uU(5,"Current Royalty Ratio :"),t.qZA(),t.TgZ(6,"div",9),t._uU(7),t.ALo(8,"number"),t.qZA()(),t.TgZ(9,"div",10)(10,"nz-steps",11),t._UZ(11,"nz-step",12)(12,"nz-step",12)(13,"nz-step",12),t.YNc(14,R,2,0,"ng-template",null,13,t.W1O),t.YNc(16,w,2,0,"ng-template",null,14,t.W1O),t.YNc(18,O,2,0,"ng-template",null,15,t.W1O),t.qZA()(),t.ynx(20,16),t.YNc(21,P,8,7,"div",17),t.YNc(22,Z,19,5,"div",17),t.YNc(23,T,29,15,"div",17),t.BQk(),t.qZA()),2&e){const n=t.MAs(15),i=t.MAs(17),o=t.MAs(19),s=t.oxw();t.xp6(2),t.AsE("",s.pair.collection.symbol,"-",s.pair.token.symbol," Royalty Ratio Application"),t.xp6(5),t.hij("",t.xi3(8,11,s.formatTokenValue(s.currentRoyaltyRatio,"16"),"1.2-4")," %"),t.xp6(3),t.Q6J("nzCurrent",s.stepIndex),t.xp6(1),t.Q6J("nzTitle",n),t.xp6(1),t.Q6J("nzTitle",i),t.xp6(1),t.Q6J("nzTitle",o),t.xp6(7),t.Q6J("ngSwitch",s.stepIndex),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2)}}const A=[{path:"",component:(()=>{class e{constructor(n,i,o,s){this.route=n,this.router=i,this.cacheService=o,this.web3Service=s,this.isSpinning=!1,this.isApplying=!1,this.stepIndex=0,this.description="",this.currentRoyaltyRatio="0",this.newRoyaltyRatio="0",this.now=(new Date).getTime(),this.formatterPercent=J=>`${J} %`}ngOnInit(){this.pair$=this.route.paramMap.pipe((0,x.w)(n=>{const i=n.get("pairAddress")||void 0;return this.cacheService.getPairByAddress(i)}),(0,v.x)((n,i)=>n?.address==i?.address&&n?.proposalCount==i?.proposalCount)),this.sub=this.pair$.subscribe(n=>{this.pair=n,n&&this.fetchRoyalty()})}fetchRoyalty(){this.pair&&this.web3Service.invokeContract("IntswapV1Factory","getRoyaltyInfo",[this.pair.address]).then(n=>{this.currentRoyaltyRatio=n[1]})}formatTokenValue(n,i){return(0,f.formatUnits)(n,i)}ngOnDestroy(){this.sub?.unsubscribe()}parseFloat(n){return parseFloat(n)}goToStep(n){!this.pair||2==n&&this.description.length>100||(this.stepIndex=n)}applyRequest(){!this.pair||(this.isApplying=!0,this.web3Service.invokeContract("IntswapV1CreatorManager","applyUpdatingRoyaltyInfo",[this.pair.address,(0,f.parseUnits)(this.newRoyaltyRatio+"","16").toString(),`Request Readjust ${this.pair.collection.symbol}&${this.pair.token.symbol} Royalty Ratio`,this.description]).then(n=>{this.router.navigate(["app/proposal/",this.pair.address])}).finally(()=>this.isApplying=!1))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(d.gz),t.Y36(d.F0),t.Y36(C.Q),t.Y36(b.U))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-royalty-ratio"]],decls:5,vars:4,consts:[[3,"nzSpinning","nzIndicator","nzDelay"],["indicatorTemplate",""],[1,"page-range-wrapper"],["class","page-range-card",4,"ngIf"],[2,"display","flex","width","100vw","height","90vh","position","fixed","align-items","center","justify-content","center"],["color","primary",1,"spin-icon"],[1,"page-range-card"],[1,"pair-info"],[1,"info-label"],[1,"info-value"],[1,"stepper"],["nzLabelPlacement","vertical",3,"nzCurrent"],[3,"nzTitle"],["title1",""],["title2",""],["title3",""],[3,"ngSwitch"],["class","step-content",4,"ngSwitchCase"],[1,"step-content"],[1,"revise-card"],[1,"label"],[1,"value"],["nzPrecisionMode","cut",1,"nft-input",3,"nzSize","nzMin","nzMax","nzStep","ngModel","nzFormatter","nzPrecision","ngModelChange"],["mat-button","",1,"step-btn",3,"click"],[1,"description-step"],[1,"description-label"],[1,"description-value"],[3,"nzMaxCharacterCount"],["rows","3","nz-input","",3,"ngModel","nzStatus","ngModelChange"],[1,"review-step"],[1,"review-label"],[1,"review-value"],[2,"display","flex","flex-direction","row","justify-content","center","align-items","center","margin-top","24px"],["mat-button","",1,"step-btn",2,"margin-left","24px",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"nz-spin",0),t.YNc(1,M,3,0,"ng-template",null,1,t.W1O),t.TgZ(3,"div",2),t.YNc(4,z,24,14,"div",3),t.qZA()()),2&n){const o=t.MAs(2);t.Q6J("nzSpinning",i.isSpinning||i.isApplying)("nzIndicator",o)("nzDelay",200),t.xp6(4),t.Q6J("ngIf",i.pair)}},dependencies:[p.O5,p.RF,p.n9,c.iy,c.$W,l.Fj,l.JJ,l.On,_.Hw,h.lW,y._V,g.w,g.Zp,m.W,p.JJ,p.uU],styles:[".page-range-wrapper[_ngcontent-%COMP%]{padding:12px 25%;width:100vw;box-sizing:border-box}.page-range-card[_ngcontent-%COMP%]{position:relative;background:#fff;min-height:40vh;border-radius:8px;box-shadow:0 2px 4px -1px #0003;box-sizing:border-box;width:100%;margin-bottom:24px;overflow:hidden}.page-range-card[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:bolder;width:100%;text-align:center;padding:12px 0;color:#fff;background:linear-gradient(45deg,#ff8bc7 0%,#ffe3af 100%)}.divider[_ngcontent-%COMP%]{height:2px;width:100%;background:linear-gradient(90deg,#ff8bc7 0%,#ffe3af 100%);margin-bottom:12px}.pair-info[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;width:80%;font-size:18px;padding:12px 0;margin:auto;column-gap:24px}.info-label[_ngcontent-%COMP%]{font-weight:700;justify-self:end}.info-value[_ngcontent-%COMP%]{justify-self:start}.stepper[_ngcontent-%COMP%]{width:100%;padding:12px 0}.step-content[_ngcontent-%COMP%]{min-height:20vh;width:100%;padding:12px}.input-wrapper[_ngcontent-%COMP%]{position:relative;min-height:96px;width:100%;border-radius:16px;background:rgba(243,243,243,.3);border:2px solid rgba(94,104,135,0);transition:all .2s;display:grid;grid-template-columns:1fr;column-gap:12px;justify-items:center;align-items:center;box-sizing:border-box;padding:12px 12px 0}.input-wrapper[_ngcontent-%COMP%]:hover{border:2px solid rgba(228,178,201,.24)}.input-wrapper[_ngcontent-%COMP%]:hover   .input-label[_ngcontent-%COMP%]{border:2px solid rgba(228,178,201,.4)}.input-label[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;left:12px;top:-18px;color:#ff5fb7;font-weight:bolder;font-size:18px;background:rgb(251,251,251);border-radius:16px;padding:0 12px;border:2px solid rgba(228,178,201,.24);transition:all .2s}[_nghost-%COMP%]     .ant-input-number{border-radius:8px;overflow:hidden}[_nghost-%COMP%]     .ant-input-number-handler{border:none!important}[_nghost-%COMP%]     .ant-input-number-disabled{background:transparent}[_nghost-%COMP%]     .ant-input-number-focused, [_nghost-%COMP%]     .ant-input-number:hover, [_nghost-%COMP%]     .ant-input-focused, [_nghost-%COMP%]     .ant-input:hover, [_nghost-%COMP%]     .ant-input:focus{border-color:#fde}[_nghost-%COMP%]     .ant-input-number-focused, [_nghost-%COMP%]     .ant-input{box-shadow:0 0 0 2px #dfbbcc33}.nft-input[_ngcontent-%COMP%]{width:100%;font-size:28px;color:#7f7f7f}.nft-slider[_ngcontent-%COMP%]{width:100%;margin:0 24px 0 36px}[_nghost-%COMP%]     .ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open){border-color:#ffe6b8}[_nghost-%COMP%]     .ant-slider-track{background:linear-gradient(45deg,#f7d8fd 0%,#f9e6c2 100%)}[_nghost-%COMP%]     .ant-slider-handle{border:2px solid #ffa3da}.revise-card[_ngcontent-%COMP%]{padding:12px 24px;width:100%;display:grid;grid-template-columns:1fr 1fr;justify-items:center;align-items:center;row-gap:12px;column-gap:24px}.revise-card[_ngcontent-%COMP%]   .step-btn[_ngcontent-%COMP%]{grid-column-start:span 2}.revise-card[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{justify-self:end;font-size:18px;font-weight:700}.revise-card[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{justify-self:start;width:50%}.step-btn[_ngcontent-%COMP%]{text-align:center;width:120px;min-height:40px;border-radius:16px;background:linear-gradient(45deg,#ffb6db 0%,#fadba2 100%);color:#fff;font-size:18px;line-height:18px;font-weight:bolder;margin-bottom:12px}.description-step[_ngcontent-%COMP%]{width:100%;padding:12px 10%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;justify-items:center;align-items:center;row-gap:12px;column-gap:12px}.description-step[_ngcontent-%COMP%]   .description-label[_ngcontent-%COMP%]{width:100%;text-align:right;font-weight:700;align-self:start}.description-step[_ngcontent-%COMP%]   .description-value[_ngcontent-%COMP%]{grid-column-start:span 3;justify-self:start;width:100%;word-break:break-word}.description-step[_ngcontent-%COMP%]   .step-btn[_ngcontent-%COMP%]{grid-column-start:span 2}.review-step[_ngcontent-%COMP%]{width:80%;margin:auto;padding:12px 10%;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;justify-items:center;align-items:center;row-gap:12px;column-gap:12px;border-radius:16px;border:2px solid rgba(228,178,201,.24)}.review-step[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{grid-column-start:span 4;text-align:center;font-size:24px;font-weight:bolder}.review-step[_ngcontent-%COMP%]   .review-label[_ngcontent-%COMP%]{width:100%;text-align:right;font-weight:700;align-self:start}.review-step[_ngcontent-%COMP%]   .review-value[_ngcontent-%COMP%]{grid-column-start:span 3;justify-self:start;width:80%;word-break:break-word}.review-step[_ngcontent-%COMP%]   .step-btn[_ngcontent-%COMP%]{grid-column-start:span 2}.review-step[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]{grid-column-start:span 4;padding:12px;width:100%}.review-step[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]   .liquidity-price-chart[_ngcontent-%COMP%], .review-step[_ngcontent-%COMP%]   .chart[_ngcontent-%COMP%]   .price-volume-chart[_ngcontent-%COMP%]{width:100%;height:30vh}.spin-icon[_ngcontent-%COMP%]{transform:rotate(45deg);animation:rotate 1.2s infinite linear}@keyframes rotate{to{transform:rotate(405deg)}}"]}),e})()}];let U=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(A),d.Bz]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,U,c.N6,l.u5,_.Ps,h.ot,y.Zf,g.o7,m.j]}),e})()}}]);