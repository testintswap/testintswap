"use strict";(self.webpackChunkintswap_frontend=self.webpackChunkintswap_frontend||[]).push([[1624],{71624:(un,v,a)=>{a.r(v),a.d(v,{LiquidityModule:()=>gn});var l=a(88692),u=a(7976),k=a(8239),C=a(2024),q=a(92673),S=a(61528),n=a(64537),I=a(39869),U=a(94602),Y=a(19376),w=a(96195),c=a(64762),B=a(14581),f=a(13528),E=a(74970),F=a(25840),d=a(80028),h=a(63467),p=a(66792),x=a(35076),_=a(2295),y=a(56140),A=a(16680);const P=["*"],J=["collapseHeader"];function Q(e,i){if(1&e&&(n.ynx(0),n._UZ(1,"span",7),n.BQk()),2&e){const t=i.$implicit,o=n.oxw(2);n.xp6(1),n.Q6J("nzType",t||"right")("nzRotate",o.nzActive?90:0)}}function D(e,i){if(1&e&&(n.TgZ(0,"div"),n.YNc(1,Q,2,2,"ng-container",3),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzStringTemplateOutlet",t.nzExpandedIcon)}}function H(e,i){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.Oqu(t.nzHeader)}}function j(e,i){if(1&e&&(n.ynx(0),n._uU(1),n.BQk()),2&e){const t=n.oxw(2);n.xp6(1),n.Oqu(t.nzExtra)}}function R(e,i){if(1&e&&(n.TgZ(0,"div",8),n.YNc(1,j,2,1,"ng-container",3),n.qZA()),2&e){const t=n.oxw();n.xp6(1),n.Q6J("nzStringTemplateOutlet",t.nzExtra)}}const b="collapse";let T=(()=>{class e{constructor(t,o,s,r){this.nzConfigService=t,this.cdr=o,this.directionality=s,this.destroy$=r,this._nzModuleName=b,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="left",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(b).pipe((0,f.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(t){this.listOfNzCollapsePanelComponent.push(t)}removePanel(t){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(t),1)}click(t){this.nzAccordion&&!t.nzActive&&this.listOfNzCollapsePanelComponent.filter(o=>o!==t).forEach(o=>{o.nzActive&&(o.nzActive=!1,o.nzActiveChange.emit(o.nzActive),o.markForCheck())}),t.nzActive=!t.nzActive,t.nzActiveChange.emit(t.nzActive)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d.jY),n.Y36(n.sBO),n.Y36(x.Is,8),n.Y36(h.kn))},e.\u0275cmp=n.Xpm({type:e,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(t,o){2&t&&n.ekj("ant-collapse-icon-position-left","left"===o.nzExpandIconPosition)("ant-collapse-icon-position-right","right"===o.nzExpandIconPosition)("ant-collapse-ghost",o.nzGhost)("ant-collapse-borderless",!o.nzBordered)("ant-collapse-rtl","rtl"===o.dir)},inputs:{nzAccordion:"nzAccordion",nzBordered:"nzBordered",nzGhost:"nzGhost",nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],features:[n._Bn([h.kn])],ngContentSelectors:P,decls:1,vars:0,template:function(t,o){1&t&&(n.F$t(),n.Hsn(0))},encapsulation:2,changeDetection:0}),(0,c.gn)([(0,d.oS)(),(0,p.yF)()],e.prototype,"nzAccordion",void 0),(0,c.gn)([(0,d.oS)(),(0,p.yF)()],e.prototype,"nzBordered",void 0),(0,c.gn)([(0,d.oS)(),(0,p.yF)()],e.prototype,"nzGhost",void 0),e})();const O="collapsePanel";let $=(()=>{class e{constructor(t,o,s,r,g,m){this.nzConfigService=t,this.ngZone=o,this.cdr=s,this.destroy$=r,this.nzCollapseComponent=g,this.noAnimation=m,this._nzModuleName=O,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new n.vpe,this.nzConfigService.getConfigChangeEventForComponent(O).pipe((0,f.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}markForCheck(){this.cdr.markForCheck()}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>(0,B.R)(this.collapseHeader.nativeElement,"click").pipe((0,E.h)(()=>!this.nzDisabled),(0,f.R)(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d.jY),n.Y36(n.R0b),n.Y36(n.sBO),n.Y36(h.kn),n.Y36(T,1),n.Y36(_.P,8))},e.\u0275cmp=n.Xpm({type:e,selectors:[["nz-collapse-panel"]],viewQuery:function(t,o){if(1&t&&n.Gf(J,7),2&t){let s;n.iGM(s=n.CRH())&&(o.collapseHeader=s.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(t,o){2&t&&n.ekj("ant-collapse-no-arrow",!o.nzShowArrow)("ant-collapse-item-active",o.nzActive)("ant-collapse-item-disabled",o.nzDisabled)},inputs:{nzActive:"nzActive",nzDisabled:"nzDisabled",nzShowArrow:"nzShowArrow",nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],features:[n._Bn([h.kn])],ngContentSelectors:P,decls:8,vars:8,consts:[["role","button",1,"ant-collapse-header"],["collapseHeader",""],[4,"ngIf"],[4,"nzStringTemplateOutlet"],["class","ant-collapse-extra",4,"ngIf"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"],[1,"ant-collapse-extra"]],template:function(t,o){1&t&&(n.F$t(),n.TgZ(0,"div",0,1),n.YNc(2,D,2,1,"div",2),n.YNc(3,H,2,1,"ng-container",3),n.YNc(4,R,2,1,"div",4),n.qZA(),n.TgZ(5,"div",5)(6,"div",6),n.Hsn(7),n.qZA()()),2&t&&(n.uIk("aria-expanded",o.nzActive),n.xp6(2),n.Q6J("ngIf",o.nzShowArrow),n.xp6(1),n.Q6J("nzStringTemplateOutlet",o.nzHeader),n.xp6(1),n.Q6J("ngIf",o.nzExtra),n.xp6(1),n.ekj("ant-collapse-content-active",o.nzActive),n.Q6J("@.disabled",null==o.noAnimation?null:o.noAnimation.nzNoAnimation)("@collapseMotion",o.nzActive?"expanded":"hidden"))},dependencies:[l.O5,y.Ls,A.f],encapsulation:2,data:{animation:[F.J_]},changeDetection:0}),(0,c.gn)([(0,p.yF)()],e.prototype,"nzActive",void 0),(0,c.gn)([(0,p.yF)()],e.prototype,"nzDisabled",void 0),(0,c.gn)([(0,d.oS)(),(0,p.yF)()],e.prototype,"nzShowArrow",void 0),e})(),V=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[x.vT,l.ez,y.PV,A.T,_.g]}),e})();var Z=a(9638),M=a(83331),N=a(50132);function G(e,i){1&e&&(n.TgZ(0,"div",11),n._uU(1," No Data. "),n.qZA())}function W(e,i){1&e&&(n.TgZ(0,"div",12)(1,"mat-icon",13),n._uU(2,"autorenew "),n.qZA()())}function X(e,i){1&e&&(n.TgZ(0,"span",18),n._uU(1," loading... "),n.qZA())}function K(e,i){if(1&e&&(n.TgZ(0,"nz-collapse-panel",16),n.YNc(1,X,2,0,"ng-template",null,17,n.W1O),n.TgZ(3,"div",12)(4,"mat-icon",13),n._uU(5,"autorenew "),n.qZA()()()),2&e){const t=n.MAs(2),o=n.oxw().index;n.Q6J("nzActive",0==o)("nzHeader",t)}}function nn(e,i){if(1&e&&(n.TgZ(0,"mat-icon",27),n._uU(1,"warning "),n.qZA()),2&e){n.oxw(2);const t=n.MAs(4);n.Q6J("nzPopoverContent",t)("nzPopoverPlacement","right")}}function en(e,i){if(1&e&&(n.TgZ(0,"span",25),n._uU(1),n.YNc(2,nn,2,2,"mat-icon",26),n.qZA()),2&e){const t=n.oxw().ngIf;n.Q6J("ngClass",t.isReadjustPriceRange?"warn-header":""),n.xp6(1),n.AsE("",t.collection.symbol,"-",t.token.symbol,""),n.xp6(1),n.Q6J("ngIf",t.isReadjustPriceRange)}}const tn=function(e){return["/app/proposal",e]};function on(e,i){if(1&e&&(n.TgZ(0,"span"),n._uU(1," The market making range has been modified. "),n.TgZ(2,"a",28),n._uU(3,"Check for the details"),n.qZA()(),n._uU(4," . ")),2&e){const t=n.oxw().ngIf;n.xp6(2),n.Q6J("routerLink",n.VKq(1,tn,t.address))}}const an=function(e,i){return["/app/remove",e,i]},rn=function(e,i){return["/app/add",e,i]};function sn(e,i){if(1&e&&(n.TgZ(0,"nz-collapse-panel",19),n.YNc(1,en,3,4,"ng-template",null,17,n.W1O),n.YNc(3,on,5,3,"ng-template",null,20,n.W1O),n.TgZ(5,"div",11)(6,"div",21),n._uU(7,"Your NFT in Pool:"),n.qZA(),n.TgZ(8,"div",22),n._uU(9),n.ALo(10,"number"),n.qZA(),n.TgZ(11,"div",21),n._uU(12,"Your Token in Pool:"),n.qZA(),n.TgZ(13,"div",22),n._uU(14),n.ALo(15,"number"),n.qZA(),n.TgZ(16,"div",21),n._uU(17,"Your LP Token:"),n.qZA(),n.TgZ(18,"div",22),n._uU(19),n.ALo(20,"number"),n.qZA(),n.TgZ(21,"div",21),n._uU(22,"Share of pool:"),n.qZA(),n.TgZ(23,"div",22),n._uU(24),n.ALo(25,"number"),n.qZA(),n.TgZ(26,"button",23),n._uU(27,"Remove Liquidity"),n.qZA(),n.TgZ(28,"button",24),n._uU(29,"Add Liquidity"),n.qZA()()()),2&e){const t=i.ngIf,o=n.MAs(2),s=n.oxw().index,r=n.oxw(),g=n.MAs(15);n.Q6J("nzHeader",o)("nzExtra",g)("nzActive",0==s),n.xp6(9),n.hij("",n.xi3(10,9,r.formatTokenValue(t.userNftValue,"18"),"1.0-0")," NFT"),n.xp6(5),n.hij(" ",n.xi3(15,12,r.formatTokenValue(t.userBaseTokenValue,t.token.decimals),"1.2-4")," Token"),n.xp6(5),n.Oqu(n.xi3(20,15,r.formatTokenValue(t.userLiquidity,"18"),"1.2-4")),n.xp6(5),n.hij("",n.xi3(25,18,t.userShare,"1.2-2"),"%"),n.xp6(2),n.Q6J("routerLink",n.WLB(21,an,t.collection.address,t.token.address)),n.xp6(2),n.Q6J("routerLink",n.WLB(24,rn,t.collection.address,t.token.address))}}function ln(e,i){if(1&e&&(n.ynx(0),n.YNc(1,K,6,2,"ng-template",null,14,n.W1O),n.YNc(3,sn,30,27,"nz-collapse-panel",15),n.ALo(4,"async"),n.BQk()),2&e){const t=i.$implicit,o=n.MAs(2);n.xp6(3),n.Q6J("ngIf",n.lcZ(4,2,t))("ngIfElse",o)}}function cn(e,i){1&e&&(n.TgZ(0,"span",29),n._uU(1,"Manage"),n.qZA())}const L=function(){return["/app/add"]},dn=[{path:"",component:(()=>{class e{constructor(t,o,s,r){this.graphqlService=t,this.accountService=o,this.cacheService=s,this.web3Service=r,this.pools$=[],this.isLoading=!0}ngOnInit(){this.fetchUserPools()}formatTokenValue(t,o){return(0,q.formatUnits)(t,o)}getPairInCache(t){var o=this;return this.cacheService.getPairByid(t.pair.id).pipe((0,S.w)(function(){var s=(0,k.Z)(function*(r){if(r){const g=C.O$.from(t.liquidity).mul(C.O$.from("10000")).div(r.liquidity).toNumber()/100,m=(yield o.graphqlService.fetchPriceRangeProposal(r.id)).data.proposals.length>0;return o.web3Service.invokeContract("IntswapV1Pair","getLPTokenValue",[t.liquidity],r.address).then(z=>({...r,userLiquidity:t.liquidity,userNftValue:z[0],userBaseTokenValue:z[1],userShare:g,isReadjustPriceRange:m})).catch(z=>({...r,userLiquidity:t.liquidity,userNftValue:"0",userBaseTokenValue:"0",userShare:g,isReadjustPriceRange:m}))}return Promise.resolve(void 0)});return function(r){return s.apply(this,arguments)}}()))}fetchUserPools(){this.poolSub=this.accountService.account$.subscribe(t=>{t?this.graphqlService.fetchUserPools(t).then(({data:o})=>{o.liquidityInPairs&&(this.pools$=o.liquidityInPairs.map(s=>this.getPairInCache(s)))}).finally(()=>this.isLoading=!1):this.isLoading=!1})}ngOnDestroy(){this.poolSub?.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(I.J),n.Y36(U.B),n.Y36(Y.Q),n.Y36(w.U))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-liquidity"]],decls:16,vars:8,consts:[[1,"liquidity-card"],[1,"card-header"],[1,"spacer"],[1,"create-btn",3,"routerLink"],["mat-button","",1,"card-header-btn",3,"routerLink"],[1,"pool-list"],["class","panel-content",4,"ngIf"],["class","panel-content","style","justify-items: center;",4,"ngIf"],["nzExpandIconPosition","right","nzAccordion","",3,"nzBordered"],[4,"ngFor","ngForOf"],["extraTpl",""],[1,"panel-content"],[1,"panel-content",2,"justify-items","center"],["color","warn",1,"spin-icon",2,"grid-column-start","span 2"],["loadingDiv",""],[3,"nzHeader","nzExtra","nzActive",4,"ngIf","ngIfElse"],[3,"nzActive","nzHeader"],["panelHeader",""],[1,"panel-header"],[3,"nzHeader","nzExtra","nzActive"],["changeIntervalPop",""],[1,"pool-info-label"],[1,"pool-info-value"],["mat-button","",1,"remove-btn",3,"routerLink"],["mat-button","",1,"add-btn",3,"routerLink"],[1,"panel-header",3,"ngClass"],["style","color: rgb(255, 102, 0);font-size:14px;margin-left: 12px;","nz-popover","",3,"nzPopoverContent","nzPopoverPlacement",4,"ngIf"],["nz-popover","",2,"color","rgb(255, 102, 0)","font-size","14px","margin-left","12px",3,"nzPopoverContent","nzPopoverPlacement"],[3,"routerLink"],[1,"panel-extra"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"h1"),n._uU(3,"Your Pools"),n.qZA(),n._UZ(4,"span",2),n.TgZ(5,"button",3),n._uU(6,"Create New Pair"),n.qZA(),n.TgZ(7,"button",4),n._uU(8,"Add Liquidity"),n.qZA()(),n.TgZ(9,"div",5),n.YNc(10,G,2,0,"div",6),n.YNc(11,W,3,0,"div",7),n.TgZ(12,"nz-collapse",8),n.YNc(13,ln,5,4,"ng-container",9),n.qZA(),n.YNc(14,cn,2,0,"ng-template",null,10,n.W1O),n.qZA()()),2&t&&(n.xp6(5),n.Q6J("routerLink",n.DdM(6,L)),n.xp6(2),n.Q6J("routerLink",n.DdM(7,L)),n.xp6(3),n.Q6J("ngIf",!o.isLoading&&0==o.pools$.length),n.xp6(1),n.Q6J("ngIf",o.isLoading),n.xp6(1),n.Q6J("nzBordered",!1),n.xp6(1),n.Q6J("ngForOf",o.pools$))},dependencies:[l.mk,l.sg,l.O5,u.rH,u.yS,$,T,Z.lW,M.Hw,N.lU,l.Ov,l.JJ],styles:[".liquidity-card[_ngcontent-%COMP%]{position:relative;max-width:640px;width:100%;border-radius:16px;border:1px solid rgba(94,104,135,.24);margin-top:2rem;margin-left:auto;margin-right:auto;min-height:30vh;background:#fff;padding:12px 24px}.card-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding:12px}.spacer[_ngcontent-%COMP%]{flex:1 1 auto}.card-header-btn[_ngcontent-%COMP%], .add-btn[_ngcontent-%COMP%]{width:160px;height:36px;border-radius:16px;background:linear-gradient(45deg,#ffb6db 0%,#f9d4af 100%);color:#fff;font-size:14px;font-weight:bolder;display:flex;justify-content:center;align-items:center;transition:all .2s;cursor:pointer;z-index:1;border:none}.card-header-btn[_ngcontent-%COMP%]:hover, .add-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#fda7d2 0%,#f8cda2 100%);color:#5a4c58}.create-btn[_ngcontent-%COMP%], .remove-btn[_ngcontent-%COMP%]{width:160px;height:36px;border-radius:16px;background:linear-gradient(45deg,#f2ccfe 0%,#aff0f9 100%);color:#fff;font-size:14px;font-weight:bolder;display:flex;justify-content:center;align-items:center;transition:all .2s;cursor:pointer;z-index:1;border:none;margin-right:12px}.create-btn[_ngcontent-%COMP%]{background:#fff;color:#c293ff;border:1px solid #c293ff}.create-btn[_ngcontent-%COMP%]:hover{background:rgba(231,219,255,.1);color:#9f5afa;border:1px solid #954af8}.remove-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(45deg,#f0c0ff 0%,#9eecf7 100%);color:#97f}[_nghost-%COMP%]     .ant-collapse-borderless{background:#fff}[_nghost-%COMP%]     .ant-collapse-borderless .ant-collapse-item{border:none;margin-bottom:24px;border-radius:16px;background:linear-gradient(45deg,#e0fffd 0%,#fceeff 100%)}[_nghost-%COMP%]     .ant-collapse-borderless .ant-collapse-item .ant-collapse-header{min-height:72px;align-items:center}.panel-header[_ngcontent-%COMP%]{font-size:24px;line-height:24px;font-weight:700;color:#5b417e}.warn-header[_ngcontent-%COMP%]{color:#eb6404}.panel-extra[_ngcontent-%COMP%]{font-size:18px;line-height:24px}.panel-content[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr;align-items:center;row-gap:4px;padding:12px 24px;column-gap:24px;font-size:18px}.panel-content[_ngcontent-%COMP%]   .pool-info-label[_ngcontent-%COMP%]{justify-self:start}.panel-content[_ngcontent-%COMP%]   .pool-info-value[_ngcontent-%COMP%], .panel-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{justify-self:end}.panel-content[_ngcontent-%COMP%]   .add-btn[_ngcontent-%COMP%], .panel-content[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{margin-top:12px}.spin-icon[_ngcontent-%COMP%]{transform:rotate(45deg);animation:rotate 1.2s infinite linear}@keyframes rotate{to{transform:rotate(405deg)}}"]}),e})()}];let pn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[u.Bz.forChild(dn),u.Bz]}),e})(),gn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[l.ez,pn,V,Z.ot,M.Ps,N.$6]}),e})()}}]);