(self.webpackChunkintswap_frontend=self.webpackChunkintswap_frontend||[]).push([[5369],{55369:(Rt,T,I)=>{"use strict";I.r(T),I.d(T,{default:()=>Sn});var U={};I.r(U),I.d(U,{decrypt:()=>bn,encrypt:()=>wn,generateKey:()=>lr,verifyHmac:()=>dr});var E=I(8239),v=I(61859);const N=["session_request","session_update","exchange_key","connect","disconnect","display_uri","modal_closed","transport_open","transport_close","transport_error"],d=["eth_sendTransaction","eth_signTransaction","eth_sign","eth_signTypedData","eth_signTypedData_v1","eth_signTypedData_v2","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","wallet_addEthereumChain","wallet_switchEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"];var F=I(87760),It=I.n(F),kt=(I(16658),I(15343)),Pt=I.n(kt);const A="0";function q(r){return new Uint8Array(r)}function O(r,n=!1){const s=r.toString("hex");return n?Bt(s):s}function c(r){return Pt()(r)}function t(r,n=!1){return O(c(r),n)}function i(r){return function xt(r){return r.toString("utf8")}(c(r))}function l(r){return q(function u(r){return Buffer.from(P(r),"hex")}(r))}function h(r){return Buffer.from(r,"utf8")}function b(r){return q(h(r))}function Q(...r){let n=[];return r.forEach(s=>n=n.concat(Array.from(s))),new Uint8Array([...n])}function $(r,n=8,s=A){return function ae(r,n,s=A){return function X(r,n,s,m=A){const g=n-r.length;let w=r;if(g>0){const B=m.repeat(g);w=s?B+r:r+B}return w}(r,n,!0,s)}(r,function et(r,n=8){const s=r%n;return s?(r-s)/n*n+n:r}(r.length,n),s)}function P(r){return r.replace(/^0x/,"")}function Bt(r){return r.startsWith("0x")?r:`0x${r}`}function Y(r){return(r=$(r=P(r),2))&&(r=Bt(r)),r}function J(r){return c(new Uint8Array(r))}function ot(r){return q(r).buffer}function Dt(r,n){const s=P(Y(new(It())(r).toString(16)));return n?s:Bt(s)}var jt=I(37109),te=I(38572);function ye(r){return Y(r)}const vr=function tr(){return Date.now()*Math.pow(10,3)+Math.floor(Math.random()*Math.pow(10,3))};function ke(){return((n,s)=>{for(s=n="";n++<36;s+=51*n&52?(15^n?8^Math.random()*(20^n?16:4):4).toString(16):"-");return s})()}function er(r,n){return function Gt(r,n){return!("string"!=typeof r||!r.match(/^0x[0-9A-Fa-f]*$/)||n&&r.length!==2+2*n)}(r,n)}function ee(r){return typeof r.result<"u"}function _e(r){return typeof r.error<"u"}function rr(r){return typeof r.event<"u"}function nr(r){return!function Mr(r){return!(r&&r.length)}(r)&&!er(r[0])&&(r[0]=function ft(r,n){return function S(r,n=!1){return O(h(r),n)}(r,!n)}(r[0])),r}function Oe(r){if(typeof r.type<"u"&&"0"!==r.type)return r;if(typeof r.from>"u"||!(r=>!(!r||"0x"!==r.toLowerCase().substring(0,2)||!/^(0x)?[0-9a-f]{40}$/i.test(r)||!/^(0x)?[0-9a-f]{40}$/.test(r)&&!/^(0x)?[0-9A-F]{40}$/.test(r)&&r!==function Sr(r){r=P(r.toLowerCase());const n=P((0,jt.keccak_256)(function at(r){return h(r)}(r)));let s="";for(let m=0;m<r.length;m++)parseInt(n[m],16)>7?s+=r[m].toUpperCase():s+=r[m];return Bt(s)}(r)))(r.from))throw new Error("Transaction object must include a valid 'from' value.");function n(g){let w=g;return("number"==typeof g||"string"==typeof g&&!function _r(r){return""===r||"string"==typeof r&&""===r.trim()}(g))&&(er(g)?"string"==typeof g&&(w=ye(g)):w=Dt(g)),"string"==typeof w&&(w=function gr(r){return function rt(r){const n=r.startsWith("0x");return r=(r=P(r)).startsWith(A)?r.substring(1):r,n?Bt(r):r}(Bt(r))}(w)),w}const s={from:ye(r.from),to:typeof r.to>"u"?void 0:ye(r.to),gasPrice:typeof r.gasPrice>"u"?"":n(r.gasPrice),gas:typeof r.gas>"u"?typeof r.gasLimit>"u"?"":n(r.gasLimit):n(r.gas),value:typeof r.value>"u"?"":n(r.value),nonce:typeof r.nonce>"u"?"":n(r.nonce),data:typeof r.data>"u"?"":ye(r.data)||"0x"},m=["gasPrice","gas","value","nonce"];return Object.keys(s).forEach(g=>{(typeof s[g]>"u"||"string"==typeof s[g]&&!s[g].trim().length)&&m.includes(g)&&delete s[g]}),s}var ir=I(76617);function sr(r){return ir.parse(r)}const Br=typeof global.WebSocket<"u"?global.WebSocket:I(80748),Ne="Session currently connected",qt="Session currently disconnected",or="JSON RPC response format is invalid",ar="User close QRCode Modal",fr="abcdefghijklmnopqrstuvwxyz0123456789".split("").map(r=>`https://${r}.bridge.walletconnect.org`);function an(r){return te.getBrowerCrypto().getRandomValues(new Uint8Array(r))}const Ut="AES-CBC",Be="HMAC";function dn(r){return r===Ut?{length:256,name:Ut}:{hash:{name:"SHA-256"},name:Be}}function pn(r){return r===Ut?["encrypt","decrypt"]:["sign","verify"]}function Me(r){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,E.Z)(function*(r,n=Ut){return te.getSubtleCrypto().importKey("raw",r,dn(n),!0,pn(n))})).apply(this,arguments)}function qe(){return(qe=(0,E.Z)(function*(r,n,s){const m=te.getSubtleCrypto(),g=yield Me(n,Ut),w=yield m.encrypt({iv:r,name:Ut},g,s);return new Uint8Array(w)})).apply(this,arguments)}function He(){return(He=(0,E.Z)(function*(r,n,s){const m=te.getSubtleCrypto(),g=yield Me(n,Ut),w=yield m.decrypt({iv:r,name:Ut},g,s);return new Uint8Array(w)})).apply(this,arguments)}function vn(r,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,E.Z)(function*(r,n){const s=te.getSubtleCrypto(),m=yield Me(r,Be),g=yield s.sign({length:256,name:Be},m,n);return new Uint8Array(g)})).apply(this,arguments)}function yn(r,n,s){return function mn(r,n,s){return qe.apply(this,arguments)}(r,n,s)}function _n(r,n,s){return function gn(r,n,s){return He.apply(this,arguments)}(r,n,s)}function cr(r,n){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,E.Z)(function*(r,n){return yield vn(r,n)})).apply(this,arguments)}function lr(r){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,E.Z)(function*(r){return ot(c(an((r||256)/8)))})).apply(this,arguments)}function dr(r,n){return ze.apply(this,arguments)}function ze(){return(ze=(0,E.Z)(function*(r,n){const s=l(r.data),m=l(r.iv),w=t(l(r.hmac),!1),B=Q(s,m),Tt=t(yield cr(n,B),!1);return P(w)===P(Tt)})).apply(this,arguments)}function wn(r,n,s){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,E.Z)(function*(r,n,s){const m=q(J(n)),w=q(J(s||(yield lr(128)))),B=t(w,!1),Tt=b(JSON.stringify(r)),Ht=yield yn(w,m,Tt),pr=t(Ht,!1),re=Q(Ht,w);return{data:pr,hmac:t(yield cr(m,re),!1),iv:B}})).apply(this,arguments)}function bn(r,n){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,E.Z)(function*(r,n){const s=q(J(n));if(!s)throw new Error("Missing key: required for decryption");if(!(yield dr(r,s)))return null;const g=l(r.data),w=l(r.iv),Et=i(yield _n(w,s,g));let Tt;try{Tt=JSON.parse(Et)}catch{return null}return Tt})).apply(this,arguments)}const Sn=class Rn extends class sn{constructor(n){if(this.protocol="wc",this.version=1,this._bridge="",this._key=null,this._clientId="",this._clientMeta=null,this._peerId="",this._peerMeta=null,this._handshakeId=0,this._handshakeTopic="",this._connected=!1,this._accounts=[],this._chainId=0,this._networkId=0,this._rpcUrl="",this._eventManager=new class Wr{constructor(){this._eventEmitters=[]}subscribe(n){this._eventEmitters.push(n)}unsubscribe(n){this._eventEmitters=this._eventEmitters.filter(s=>s.event!==n)}trigger(n){let m,s=[];m=function wr(r){return typeof r.method<"u"}(n)?n.method:ee(n)||_e(n)?`response:${n.id}`:rr(n)?n.event:"",m&&(s=this._eventEmitters.filter(g=>g.event===m)),(!s||!s.length)&&!function br(r){return N.includes(r)||r.startsWith("wc_")}(m)&&!rr(m)&&(s=this._eventEmitters.filter(g=>"call_request"===g.event)),s.forEach(g=>{if(_e(n)){const w=new Error(n.error.message);g.callback(w,null)}else g.callback(null,n)})}},this._clientMeta=(0,v.getClientMeta)()||n.connectorOpts.clientMeta||null,this._cryptoLib=n.cryptoLib,this._sessionStorage=n.sessionStorage||new class Vr{constructor(n="walletconnect"){this.storageId=n}getSession(){let n=null;const s=(0,v.getLocal)(this.storageId);return s&&function kr(r){return typeof r.bridge<"u"}(s)&&(n=s),n}setSession(n){return(0,v.setLocal)(this.storageId,n),n}removeSession(){(0,v.removeLocal)(this.storageId)}}(n.connectorOpts.storageId),this._qrcodeModal=n.connectorOpts.qrcodeModal,this._qrcodeModalOptions=n.connectorOpts.qrcodeModalOptions,this._signingMethods=[...d,...n.connectorOpts.signingMethods||[]],!n.connectorOpts.bridge&&!n.connectorOpts.uri&&!n.connectorOpts.session)throw new Error("Missing one of the required parameters: bridge / uri / session");n.connectorOpts.bridge&&(this.bridge=function nn(r){return function rn(r){return"walletconnect.org"===function Xr(r){return function Yr(r){let n=r.indexOf("//")>-1?r.split("/")[2]:r.split("/")[0];return n=n.split(":")[0],n=n.split("?")[0],n}(r).split(".").slice(-2).join(".")}(r)}(r)?function en(){return fr[function tn(){return Math.floor(Math.random()*fr.length)}()]}():r}(n.connectorOpts.bridge)),n.connectorOpts.uri&&(this.uri=n.connectorOpts.uri);const s=n.connectorOpts.session||this._getStorageSession();s&&(this.session=s),this.handshakeId&&this._subscribeToSessionResponse(this.handshakeId,"Session request rejected"),this._transport=n.transport||new class Lr{constructor(n){if(this.opts=n,this._queue=[],this._events=[],this._subscriptions=[],this._protocol=n.protocol,this._version=n.version,this._url="",this._netMonitor=null,this._socket=null,this._nextSocket=null,this._subscriptions=n.subscriptions||[],this._netMonitor=n.netMonitor||new class Nr{constructor(){this._eventEmitters=[],typeof window<"u"&&typeof window.addEventListener<"u"&&(window.addEventListener("online",()=>this.trigger("online")),window.addEventListener("offline",()=>this.trigger("offline")))}on(n,s){this._eventEmitters.push({event:n,callback:s})}trigger(n){let s=[];n&&(s=this._eventEmitters.filter(m=>m.event===n)),s.forEach(m=>{m.callback()})}},!n.url||"string"!=typeof n.url)throw new Error("Missing or invalid WebSocket url");this._url=n.url,this._netMonitor.on("online",()=>this._socketCreate())}set readyState(n){}get readyState(){return this._socket?this._socket.readyState:-1}set connecting(n){}get connecting(){return 0===this.readyState}set connected(n){}get connected(){return 1===this.readyState}set closing(n){}get closing(){return 2===this.readyState}set closed(n){}get closed(){return 3===this.readyState}open(){this._socketCreate()}close(){this._socketClose()}send(n,s,m){if(!s||"string"!=typeof s)throw new Error("Missing or invalid topic field");this._socketSend({topic:s,type:"pub",payload:n,silent:!!m})}subscribe(n){this._socketSend({topic:n,type:"sub",payload:"",silent:!0})}on(n,s){this._events.push({event:n,callback:s})}_socketCreate(){if(this._nextSocket)return;const n=function Ur(r,n,s){var m,g;const B=(r.startsWith("https")?r.replace("https","wss"):r.startsWith("http")?r.replace("http","ws"):r).split("?"),Et=(0,v.isBrowser)()?{protocol:n,version:s,env:"browser",host:(null===(m=(0,v.getLocation)())||void 0===m?void 0:m.host)||""}:{protocol:n,version:s,env:(null===(g=(0,v.detectEnv)())||void 0===g?void 0:g.name)||""},Tt=function Ir(r,n){let s=sr(r);return s=Object.assign(Object.assign({},s),n),function Ar(r){return ir.stringify(r)}(s)}(function Tr(r){const n=-1!==r.indexOf("?")?r.indexOf("?"):void 0;return typeof n<"u"?r.substr(n):""}(B[1]||""),Et);return B[0]+"?"+Tt}(this._url,this._protocol,this._version);if(this._nextSocket=new Br(n),!this._nextSocket)throw new Error("Failed to create socket");this._nextSocket.onmessage=s=>this._socketReceive(s),this._nextSocket.onopen=()=>this._socketOpen(),this._nextSocket.onerror=s=>this._socketError(s),this._nextSocket.onclose=()=>{setTimeout(()=>{this._nextSocket=null,this._socketCreate()},1e3)}}_socketOpen(){this._socketClose(),this._socket=this._nextSocket,this._nextSocket=null,this._queueSubscriptions(),this._pushQueue()}_socketClose(){this._socket&&(this._socket.onclose=()=>{},this._socket.close())}_socketSend(n){const s=JSON.stringify(n);this._socket&&1===this._socket.readyState?this._socket.send(s):(this._setToQueue(n),this._socketCreate())}_socketReceive(n){var s=this;return(0,E.Z)(function*(){let m;try{m=JSON.parse(n.data)}catch{return}if(s._socketSend({topic:m.topic,type:"ack",payload:"",silent:!0}),s._socket&&1===s._socket.readyState){const g=s._events.filter(w=>"message"===w.event);g&&g.length&&g.forEach(w=>w.callback(m))}})()}_socketError(n){const s=this._events.filter(m=>"error"===m.event);s&&s.length&&s.forEach(m=>m.callback(n))}_queueSubscriptions(){this._subscriptions.forEach(s=>this._queue.push({topic:s,type:"sub",payload:"",silent:!0})),this._subscriptions=this.opts.subscriptions||[]}_setToQueue(n){this._queue.push(n)}_pushQueue(){this._queue.forEach(s=>this._socketSend(s)),this._queue=[]}}({protocol:this.protocol,version:this.version,url:this.bridge,subscriptions:[this.clientId]}),this._subscribeToInternalEvents(),this._initTransport(),n.connectorOpts.uri&&this._subscribeToSessionRequest(),n.pushServerOpts&&this._registerPushServer(n.pushServerOpts)}set bridge(n){!n||(this._bridge=n)}get bridge(){return this._bridge}set key(n){if(!n)return;const s=function ht(r){return l(r).buffer}(n);this._key=s}get key(){return this._key?function st(r,n){return t(new Uint8Array(r),!n)}(this._key,!0):""}set clientId(n){!n||(this._clientId=n)}get clientId(){let n=this._clientId;return n||(n=this._clientId=ke()),this._clientId}set peerId(n){!n||(this._peerId=n)}get peerId(){return this._peerId}set clientMeta(n){}get clientMeta(){let n=this._clientMeta;return n||(n=this._clientMeta=(0,v.getClientMeta)()),n}set peerMeta(n){this._peerMeta=n}get peerMeta(){return this._peerMeta}set handshakeTopic(n){!n||(this._handshakeTopic=n)}get handshakeTopic(){return this._handshakeTopic}set handshakeId(n){!n||(this._handshakeId=n)}get handshakeId(){return this._handshakeId}get uri(){return this._formatUri()}set uri(n){if(!n)return;const{handshakeTopic:s,bridge:m,key:g}=this._parseUri(n);this.handshakeTopic=s,this.bridge=m,this.key=g}set chainId(n){this._chainId=n}get chainId(){return this._chainId}set networkId(n){this._networkId=n}get networkId(){return this._networkId}set accounts(n){this._accounts=n}get accounts(){return this._accounts}set rpcUrl(n){this._rpcUrl=n}get rpcUrl(){return this._rpcUrl}set connected(n){}get connected(){return this._connected}set pending(n){}get pending(){return!!this._handshakeTopic}get session(){return{connected:this.connected,accounts:this.accounts,chainId:this.chainId,bridge:this.bridge,key:this.key,clientId:this.clientId,clientMeta:this.clientMeta,peerId:this.peerId,peerMeta:this.peerMeta,handshakeId:this.handshakeId,handshakeTopic:this.handshakeTopic}}set session(n){!n||(this._connected=n.connected,this.accounts=n.accounts,this.chainId=n.chainId,this.bridge=n.bridge,this.key=n.key,this.clientId=n.clientId,this.clientMeta=n.clientMeta,this.peerId=n.peerId,this.peerMeta=n.peerMeta,this.handshakeId=n.handshakeId,this.handshakeTopic=n.handshakeTopic)}on(n,s){this._eventManager.subscribe({event:n,callback:s})}off(n){this._eventManager.unsubscribe(n)}createInstantRequest(n){var s=this;return(0,E.Z)(function*(){s._key=yield s._generateKey();const m=s._formatRequest({method:"wc_instantRequest",params:[{peerId:s.clientId,peerMeta:s.clientMeta,request:s._formatRequest(n)}]});s.handshakeId=m.id,s.handshakeTopic=ke(),s._eventManager.trigger({event:"display_uri",params:[s.uri]}),s.on("modal_closed",()=>{throw new Error(ar)});const g=()=>{s.killSession()};try{const w=yield s._sendCallRequest(m);return w&&g(),w}catch(w){throw g(),w}})()}connect(n){var s=this;return(0,E.Z)(function*(){if(!s._qrcodeModal)throw new Error("QRCode Modal not provided");return s.connected?{chainId:s.chainId,accounts:s.accounts}:(yield s.createSession(n),new Promise(function(){var m=(0,E.Z)(function*(g,w){s.on("modal_closed",()=>w(new Error(ar))),s.on("connect",(B,Et)=>{if(B)return w(B);g(Et.params[0])})});return function(g,w){return m.apply(this,arguments)}}()))})()}createSession(n){var s=this;return(0,E.Z)(function*(){if(s._connected)throw new Error(Ne);if(s.pending)return;s._key=yield s._generateKey();const m=s._formatRequest({method:"wc_sessionRequest",params:[{peerId:s.clientId,peerMeta:s.clientMeta,chainId:n&&n.chainId?n.chainId:null}]});s.handshakeId=m.id,s.handshakeTopic=ke(),s._sendSessionRequest(m,"Session update rejected",{topic:s.handshakeTopic}),s._eventManager.trigger({event:"display_uri",params:[s.uri]})})()}approveSession(n){if(this._connected)throw new Error(Ne);this.chainId=n.chainId,this.accounts=n.accounts,this.networkId=n.networkId||0,this.rpcUrl=n.rpcUrl||"",this._sendResponse({id:this.handshakeId,jsonrpc:"2.0",result:{approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl,peerId:this.clientId,peerMeta:this.clientMeta}}),this._connected=!0,this._setStorageSession(),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})}rejectSession(n){if(this._connected)throw new Error(Ne);const s=n&&n.message?n.message:"Session Rejected",m=this._formatResponse({id:this.handshakeId,error:{message:s}});this._sendResponse(m),this._connected=!1,this._eventManager.trigger({event:"disconnect",params:[{message:s}]}),this._removeStorageSession()}updateSession(n){if(!this._connected)throw new Error(qt);this.chainId=n.chainId,this.accounts=n.accounts,this.networkId=n.networkId||0,this.rpcUrl=n.rpcUrl||"";const m=this._formatRequest({method:"wc_sessionUpdate",params:[{approved:!0,chainId:this.chainId,networkId:this.networkId,accounts:this.accounts,rpcUrl:this.rpcUrl}]});this._sendSessionRequest(m,"Session update rejected"),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]}),this._manageStorageSession()}killSession(n){var s=this;return(0,E.Z)(function*(){const m=n?n.message:"Session Disconnected",w=s._formatRequest({method:"wc_sessionUpdate",params:[{approved:!1,chainId:null,networkId:null,accounts:null}]});yield s._sendRequest(w),s._handleSessionDisconnect(m)})()}sendTransaction(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error(qt);const m=Oe(n),g=s._formatRequest({method:"eth_sendTransaction",params:[m]});return yield s._sendCallRequest(g)})()}signTransaction(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error(qt);const m=Oe(n),g=s._formatRequest({method:"eth_signTransaction",params:[m]});return yield s._sendCallRequest(g)})()}signMessage(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error(qt);const m=s._formatRequest({method:"eth_sign",params:n});return yield s._sendCallRequest(m)})()}signPersonalMessage(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error(qt);n=nr(n);const m=s._formatRequest({method:"personal_sign",params:n});return yield s._sendCallRequest(m)})()}signTypedData(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error(qt);const m=s._formatRequest({method:"eth_signTypedData",params:n});return yield s._sendCallRequest(m)})()}updateChain(n){var s=this;return(0,E.Z)(function*(){if(!s._connected)throw new Error("Session currently disconnected");const m=s._formatRequest({method:"wallet_updateChain",params:[n]});return yield s._sendCallRequest(m)})()}unsafeSend(n,s){return this._sendRequest(n,s),this._eventManager.trigger({event:"call_request_sent",params:[{request:n,options:s}]}),new Promise((m,g)=>{this._subscribeToResponse(n.id,(w,B)=>{if(w)g(w);else{if(!B)throw new Error("Missing JSON RPC response");m(B)}})})}sendCustomRequest(n,s){var m=this;return(0,E.Z)(function*(){if(!m._connected)throw new Error(qt);switch(n.method){case"eth_accounts":return m.accounts;case"eth_chainId":return Dt(m.chainId);case"eth_sendTransaction":case"eth_signTransaction":n.params&&(n.params[0]=Oe(n.params[0]));break;case"personal_sign":n.params&&(n.params=nr(n.params))}const g=m._formatRequest(n);return yield m._sendCallRequest(g,s)})()}approveRequest(n){if(!ee(n))throw new Error('JSON-RPC success response must include "result" field');{const s=this._formatResponse(n);this._sendResponse(s)}}rejectRequest(n){if(!_e(n))throw new Error('JSON-RPC error response must include "error" field');{const s=this._formatResponse(n);this._sendResponse(s)}}transportClose(){this._transport.close()}_sendRequest(n,s){var m=this;return(0,E.Z)(function*(){const g=m._formatRequest(n),w=yield m._encrypt(g),B=typeof s?.topic<"u"?s.topic:m.peerId,Et=JSON.stringify(w),Tt=typeof s?.forcePushNotification<"u"?!s.forcePushNotification:function Rr(r){return!!r.method.startsWith("wc_")||!d.includes(r.method)}(g);m._transport.send(Et,B,Tt)})()}_sendResponse(n){var s=this;return(0,E.Z)(function*(){const m=yield s._encrypt(n),g=s.peerId,w=JSON.stringify(m);s._transport.send(w,g,!0)})()}_sendSessionRequest(n,s,m){var g=this;return(0,E.Z)(function*(){g._sendRequest(n,m),g._subscribeToSessionResponse(n.id,s)})()}_sendCallRequest(n,s){return this._sendRequest(n,s),this._eventManager.trigger({event:"call_request_sent",params:[{request:n,options:s}]}),this._subscribeToCallResponse(n.id)}_formatRequest(n){if(typeof n.method>"u")throw new Error('JSON RPC request must have valid "method" value');return{id:typeof n.id>"u"?vr():n.id,jsonrpc:"2.0",method:n.method,params:typeof n.params>"u"?[]:n.params}}_formatResponse(n){if(typeof n.id>"u")throw new Error('JSON RPC request must have valid "id" value');const s={id:n.id,jsonrpc:"2.0"};if(_e(n)){const m=function Er(r){const n=r.message||"Failed or Rejected Request";let s=-32e3;if(r&&!r.code)switch(n){case"Parse error":s=-32700;break;case"Invalid request":s=-32600;break;case"Method not found":s=-32601;break;case"Invalid params":s=-32602;break;case"Internal error":s=-32603;break;default:s=-32e3}const m={code:s,message:n};return r.data&&(m.data=r.data),m}(n.error);return Object.assign(Object.assign(Object.assign({},s),n),{error:m})}if(ee(n))return Object.assign(Object.assign({},s),n);throw new Error(or)}_handleSessionDisconnect(n){const s=n||"Session Disconnected";this._connected||(this._qrcodeModal&&this._qrcodeModal.close(),(0,v.removeLocal)(v.mobileLinkChoiceKey)),this._connected&&(this._connected=!1),this._handshakeId&&(this._handshakeId=0),this._handshakeTopic&&(this._handshakeTopic=""),this._peerId&&(this._peerId=""),this._eventManager.trigger({event:"disconnect",params:[{message:s}]}),this._removeStorageSession(),this.transportClose()}_handleSessionResponse(n,s){s&&s.approved?(this._connected?(s.chainId&&(this.chainId=s.chainId),s.accounts&&(this.accounts=s.accounts),this._eventManager.trigger({event:"session_update",params:[{chainId:this.chainId,accounts:this.accounts}]})):(this._connected=!0,s.chainId&&(this.chainId=s.chainId),s.accounts&&(this.accounts=s.accounts),s.peerId&&!this.peerId&&(this.peerId=s.peerId),s.peerMeta&&!this.peerMeta&&(this.peerMeta=s.peerMeta),this._eventManager.trigger({event:"connect",params:[{peerId:this.peerId,peerMeta:this.peerMeta,chainId:this.chainId,accounts:this.accounts}]})),this._manageStorageSession()):this._handleSessionDisconnect(n)}_handleIncomingMessages(n){var s=this;return(0,E.Z)(function*(){if(![s.clientId,s.handshakeTopic].includes(n.topic))return;let g;try{g=JSON.parse(n.payload)}catch{return}const w=yield s._decrypt(g);w&&s._eventManager.trigger(w)})()}_subscribeToSessionRequest(){this._transport.subscribe(this.handshakeTopic)}_subscribeToResponse(n,s){this.on(`response:${n}`,s)}_subscribeToSessionResponse(n,s){this._subscribeToResponse(n,(m,g)=>{m?this._handleSessionResponse(m.message):ee(g)?this._handleSessionResponse(s,g.result):this._handleSessionResponse(g.error&&g.error.message?g.error.message:s)})}_subscribeToCallResponse(n){return new Promise((s,m)=>{this._subscribeToResponse(n,(g,w)=>{g?m(g):ee(w)?s(w.result):m(w.error&&w.error.message?w.error:new Error(or))})})}_subscribeToInternalEvents(){this.on("display_uri",()=>{this._qrcodeModal&&this._qrcodeModal.open(this.uri,()=>{this._eventManager.trigger({event:"modal_closed",params:[]})},this._qrcodeModalOptions)}),this.on("connect",()=>{this._qrcodeModal&&this._qrcodeModal.close()}),this.on("call_request_sent",(n,s)=>{const{request:m}=s.params[0];if((0,v.isMobile)()&&this._signingMethods.includes(m.method)){const g=(0,v.getLocal)(v.mobileLinkChoiceKey);g&&(window.location.href=g.href)}}),this.on("wc_sessionRequest",(n,s)=>{n&&this._eventManager.trigger({event:"error",params:[{code:"SESSION_REQUEST_ERROR",message:n.toString()}]}),this.handshakeId=s.id,this.peerId=s.params[0].peerId,this.peerMeta=s.params[0].peerMeta;const m=Object.assign(Object.assign({},s),{method:"session_request"});this._eventManager.trigger(m)}),this.on("wc_sessionUpdate",(n,s)=>{n&&this._handleSessionResponse(n.message),this._handleSessionResponse("Session disconnected",s.params[0])})}_initTransport(){this._transport.on("message",n=>this._handleIncomingMessages(n)),this._transport.on("open",()=>this._eventManager.trigger({event:"transport_open",params:[]})),this._transport.on("close",()=>this._eventManager.trigger({event:"transport_close",params:[]})),this._transport.on("error",()=>this._eventManager.trigger({event:"transport_error",params:["Websocket connection failed"]})),this._transport.open()}_formatUri(){return`${this.protocol}:${this.handshakeTopic}@${this.version}?bridge=${encodeURIComponent(this.bridge)}&key=${this.key}`}_parseUri(n){const s=function Or(r){const n=r.indexOf(":"),s=-1!==r.indexOf("?")?r.indexOf("?"):void 0,m=r.substring(0,n),B=function w(re){const ne=re.split("@");return{handshakeTopic:ne[0],version:parseInt(ne[1],10)}}(r.substring(n+1,s)),Ht=function Tt(re){const Zt=sr(re);return{key:Zt.key||"",bridge:Zt.bridge||""}}(typeof s<"u"?r.substr(s):"");return Object.assign(Object.assign({protocol:m},B),Ht)}(n);if(s.protocol===this.protocol){if(!s.handshakeTopic)throw Error("Invalid or missing handshakeTopic parameter value");const m=s.handshakeTopic;if(!s.bridge)throw Error("Invalid or missing bridge url parameter value");const g=decodeURIComponent(s.bridge);if(!s.key)throw Error("Invalid or missing key parameter value");return{handshakeTopic:m,bridge:g,key:s.key}}throw new Error("URI format is invalid")}_generateKey(){var n=this;return(0,E.Z)(function*(){return n._cryptoLib?yield n._cryptoLib.generateKey():null})()}_encrypt(n){var s=this;return(0,E.Z)(function*(){const m=s._key;return s._cryptoLib&&m?yield s._cryptoLib.encrypt(n,m):null})()}_decrypt(n){var s=this;return(0,E.Z)(function*(){const m=s._key;return s._cryptoLib&&m?yield s._cryptoLib.decrypt(n,m):null})()}_getStorageSession(){let n=null;return this._sessionStorage&&(n=this._sessionStorage.getSession()),n}_setStorageSession(){this._sessionStorage&&this._sessionStorage.setSession(this.session)}_removeStorageSession(){this._sessionStorage&&this._sessionStorage.removeSession()}_manageStorageSession(){this._connected?this._setStorageSession():this._removeStorageSession()}_registerPushServer(n){if(!n.url||"string"!=typeof n.url)throw Error("Invalid or missing pushServerOpts.url parameter value");if(!n.type||"string"!=typeof n.type)throw Error("Invalid or missing pushServerOpts.type parameter value");if(!n.token||"string"!=typeof n.token)throw Error("Invalid or missing pushServerOpts.token parameter value");const s={bridge:this.bridge,topic:this.clientId,type:n.type,token:n.token,peerName:"",language:n.language||""};this.on("connect",function(){var m=(0,E.Z)(function*(g,w){if(g)throw g;n.peerMeta&&(s.peerName=w.params[0].peerMeta.name);try{if(!(yield(yield fetch(`${n.url}/new`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(s)})).json()).success)throw Error("Failed to register in Push Server")}catch{throw Error("Failed to register in Push Server")}});return function(g,w){return m.apply(this,arguments)}}())}}{constructor(n,s){super({cryptoLib:U,connectorOpts:n,pushServerOpts:s})}}},5158:(Rt,T)=>{"use strict";function I(){return(null==global?void 0:global.crypto)||(null==global?void 0:global.msCrypto)||{}}function U(){const v=I();return v.subtle||v.webkitSubtle}Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowserCryptoAvailable=T.getSubtleCrypto=T.getBrowerCrypto=void 0,T.getBrowerCrypto=I,T.getSubtleCrypto=U,T.isBrowserCryptoAvailable=function E(){return!!I()&&!!U()}},69537:(Rt,T)=>{"use strict";function I(){return typeof document>"u"&&typeof navigator<"u"&&"ReactNative"===navigator.product}function U(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}Object.defineProperty(T,"__esModule",{value:!0}),T.isBrowser=T.isNode=T.isReactNative=void 0,T.isReactNative=I,T.isNode=U,T.isBrowser=function E(){return!I()&&!U()}},38572:function(Rt,T,I){"use strict";var U=this&&this.__createBinding||(Object.create?function(v,N,d,L){void 0===L&&(L=d),Object.defineProperty(v,L,{enumerable:!0,get:function(){return N[d]}})}:function(v,N,d,L){void 0===L&&(L=d),v[L]=N[d]}),E=this&&this.__exportStar||function(v,N){for(var d in v)"default"!==d&&!N.hasOwnProperty(d)&&U(N,v,d)};Object.defineProperty(T,"__esModule",{value:!0}),E(I(5158),T),E(I(69537),T)},80748:Rt=>{"use strict";Rt.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},87760:function(Rt,T,I){!function(U,E){"use strict";function v(c,t){if(!c)throw new Error(t||"Assertion failed")}function N(c,t){c.super_=t;var i=function(){};i.prototype=t.prototype,c.prototype=new i,c.prototype.constructor=c}function d(c,t,i){if(d.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,null!==c&&(("le"===t||"be"===t)&&(i=t,t=10),this._init(c||0,t||10,i||"be"))}var L;"object"==typeof U?U.exports=d:E.BN=d,d.BN=d,d.wordSize=26;try{L=I(36563).Buffer}catch{}function St(c,t,i){for(var o=0,a=Math.min(c.length,i),u=t;u<a;u++){var l=c.charCodeAt(u)-48;o<<=4,o|=l>=49&&l<=54?l-49+10:l>=17&&l<=22?l-17+10:15&l}return o}function F(c,t,i,o){for(var a=0,u=Math.min(c.length,i),l=t;l<u;l++){var p=c.charCodeAt(l)-48;a*=o,a+=p>=49?p-49+10:p>=17?p-17+10:p}return a}d.isBN=function(t){return t instanceof d||null!==t&&"object"==typeof t&&t.constructor.wordSize===d.wordSize&&Array.isArray(t.words)},d.max=function(t,i){return t.cmp(i)>0?t:i},d.min=function(t,i){return t.cmp(i)<0?t:i},d.prototype._init=function(t,i,o){if("number"==typeof t)return this._initNumber(t,i,o);if("object"==typeof t)return this._initArray(t,i,o);"hex"===i&&(i=16),v(i===(0|i)&&i>=2&&i<=36);var a=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&a++,16===i?this._parseHex(t,a):this._parseBase(t,i,a),"-"===t[0]&&(this.negative=1),this.strip(),"le"===o&&this._initArray(this.toArray(),i,o)},d.prototype._initNumber=function(t,i,o){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(v(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===o&&this._initArray(this.toArray(),i,o)},d.prototype._initArray=function(t,i,o){if(v("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var u,l,p=0;if("be"===o)for(a=t.length-1,u=0;a>=0;a-=3)this.words[u]|=(l=t[a]|t[a-1]<<8|t[a-2]<<16)<<p&67108863,this.words[u+1]=l>>>26-p&67108863,(p+=24)>=26&&(p-=26,u++);else if("le"===o)for(a=0,u=0;a<t.length;a+=3)this.words[u]|=(l=t[a]|t[a+1]<<8|t[a+2]<<16)<<p&67108863,this.words[u+1]=l>>>26-p&67108863,(p+=24)>=26&&(p-=26,u++);return this.strip()},d.prototype._parseHex=function(t,i){this.length=Math.ceil((t.length-i)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var a,u,l=0;for(o=t.length-6,a=0;o>=i;o-=6)u=St(t,o,o+6),this.words[a]|=u<<l&67108863,this.words[a+1]|=u>>>26-l&4194303,(l+=24)>=26&&(l-=26,a++);o+6!==i&&(u=St(t,i,o+6),this.words[a]|=u<<l&67108863,this.words[a+1]|=u>>>26-l&4194303),this.strip()},d.prototype._parseBase=function(t,i,o){this.words=[0],this.length=1;for(var a=0,u=1;u<=67108863;u*=i)a++;a--,u=u/i|0;for(var l=t.length-o,p=l%a,f=Math.min(l,l-p)+o,e=0,h=o;h<f;h+=a)e=F(t,h,h+a,i),this.imuln(u),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e);if(0!==p){var b=1;for(e=F(t,h,t.length,i),h=0;h<p;h++)b*=i;this.imuln(b),this.words[0]+e<67108864?this.words[0]+=e:this._iaddn(e)}},d.prototype.copy=function(t){t.words=new Array(this.length);for(var i=0;i<this.length;i++)t.words[i]=this.words[i];t.length=this.length,t.negative=this.negative,t.red=this.red},d.prototype.clone=function(){var t=new d(null);return this.copy(t),t},d.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},d.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},d.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},d.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var It=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],At=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],kt=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function Ot(c,t,i){i.negative=t.negative^c.negative;var o=c.length+t.length|0;i.length=o,o=o-1|0;var a=0|c.words[0],u=0|t.words[0],l=a*u,f=l/67108864|0;i.words[0]=67108863&l;for(var e=1;e<o;e++){for(var h=f>>>26,b=67108863&f,S=Math.min(e,t.length-1),x=Math.max(0,e-c.length+1);x<=S;x++)h+=(l=(a=0|c.words[e-x|0])*(u=0|t.words[x])+b)/67108864|0,b=67108863&l;i.words[e]=0|b,f=0|h}return 0!==f?i.words[e]=0|f:i.length--,i.strip()}d.prototype.toString=function(t,i){var o;if(i=0|i||1,16===(t=t||10)||"hex"===t){o="";for(var a=0,u=0,l=0;l<this.length;l++){var p=this.words[l],f=(16777215&(p<<a|u)).toString(16);o=0!=(u=p>>>24-a&16777215)||l!==this.length-1?It[6-f.length]+f+o:f+o,(a+=2)>=26&&(a-=26,l--)}for(0!==u&&(o=u.toString(16)+o);o.length%i!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}if(t===(0|t)&&t>=2&&t<=36){var e=At[t],h=kt[t];o="";var b=this.clone();for(b.negative=0;!b.isZero();){var S=b.modn(h).toString(t);o=(b=b.idivn(h)).isZero()?S+o:It[e-S.length]+S+o}for(this.isZero()&&(o="0"+o);o.length%i!=0;)o="0"+o;return 0!==this.negative&&(o="-"+o),o}v(!1,"Base should be between 2 and 36")},d.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&v(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},d.prototype.toJSON=function(){return this.toString(16)},d.prototype.toBuffer=function(t,i){return v(typeof L<"u"),this.toArrayLike(L,t,i)},d.prototype.toArray=function(t,i){return this.toArrayLike(Array,t,i)},d.prototype.toArrayLike=function(t,i,o){var a=this.byteLength(),u=o||Math.max(1,a);v(a<=u,"byte array longer than desired length"),v(u>0,"Requested array length <= 0"),this.strip();var f,e,l="le"===i,p=new t(u),h=this.clone();if(l){for(e=0;!h.isZero();e++)f=h.andln(255),h.iushrn(8),p[e]=f;for(;e<u;e++)p[e]=0}else{for(e=0;e<u-a;e++)p[e]=0;for(e=0;!h.isZero();e++)f=h.andln(255),h.iushrn(8),p[u-e-1]=f}return p},d.prototype._countBits=Math.clz32?function(t){return 32-Math.clz32(t)}:function(t){var i=t,o=0;return i>=4096&&(o+=13,i>>>=13),i>=64&&(o+=7,i>>>=7),i>=8&&(o+=4,i>>>=4),i>=2&&(o+=2,i>>>=2),o+i},d.prototype._zeroBits=function(t){if(0===t)return 26;var i=t,o=0;return 0==(8191&i)&&(o+=13,i>>>=13),0==(127&i)&&(o+=7,i>>>=7),0==(15&i)&&(o+=4,i>>>=4),0==(3&i)&&(o+=2,i>>>=2),0==(1&i)&&o++,o},d.prototype.bitLength=function(){var i=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+i},d.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,i=0;i<this.length;i++){var o=this._zeroBits(this.words[i]);if(t+=o,26!==o)break}return t},d.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},d.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},d.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},d.prototype.isNeg=function(){return 0!==this.negative},d.prototype.neg=function(){return this.clone().ineg()},d.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},d.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var i=0;i<t.length;i++)this.words[i]=this.words[i]|t.words[i];return this.strip()},d.prototype.ior=function(t){return v(0==(this.negative|t.negative)),this.iuor(t)},d.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},d.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},d.prototype.iuand=function(t){var i;i=this.length>t.length?t:this;for(var o=0;o<i.length;o++)this.words[o]=this.words[o]&t.words[o];return this.length=i.length,this.strip()},d.prototype.iand=function(t){return v(0==(this.negative|t.negative)),this.iuand(t)},d.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},d.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},d.prototype.iuxor=function(t){var i,o;this.length>t.length?(i=this,o=t):(i=t,o=this);for(var a=0;a<o.length;a++)this.words[a]=i.words[a]^o.words[a];if(this!==i)for(;a<i.length;a++)this.words[a]=i.words[a];return this.length=i.length,this.strip()},d.prototype.ixor=function(t){return v(0==(this.negative|t.negative)),this.iuxor(t)},d.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},d.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},d.prototype.inotn=function(t){v("number"==typeof t&&t>=0);var i=0|Math.ceil(t/26),o=t%26;this._expand(i),o>0&&i--;for(var a=0;a<i;a++)this.words[a]=67108863&~this.words[a];return o>0&&(this.words[a]=~this.words[a]&67108863>>26-o),this.strip()},d.prototype.notn=function(t){return this.clone().inotn(t)},d.prototype.setn=function(t,i){v("number"==typeof t&&t>=0);var o=t/26|0,a=t%26;return this._expand(o+1),this.words[o]=i?this.words[o]|1<<a:this.words[o]&~(1<<a),this.strip()},d.prototype.iadd=function(t){var i,o,a;if(0!==this.negative&&0===t.negative)return this.negative=0,i=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,i=this.isub(t),t.negative=1,i._normSign();this.length>t.length?(o=this,a=t):(o=t,a=this);for(var u=0,l=0;l<a.length;l++)this.words[l]=67108863&(i=(0|o.words[l])+(0|a.words[l])+u),u=i>>>26;for(;0!==u&&l<o.length;l++)this.words[l]=67108863&(i=(0|o.words[l])+u),u=i>>>26;if(this.length=o.length,0!==u)this.words[this.length]=u,this.length++;else if(o!==this)for(;l<o.length;l++)this.words[l]=o.words[l];return this},d.prototype.add=function(t){var i;return 0!==t.negative&&0===this.negative?(t.negative=0,i=this.sub(t),t.negative^=1,i):0===t.negative&&0!==this.negative?(this.negative=0,i=t.sub(this),this.negative=1,i):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},d.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var i=this.iadd(t);return t.negative=1,i._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var a,u,o=this.cmp(t);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(a=this,u=t):(a=t,u=this);for(var l=0,p=0;p<u.length;p++)l=(i=(0|a.words[p])-(0|u.words[p])+l)>>26,this.words[p]=67108863&i;for(;0!==l&&p<a.length;p++)l=(i=(0|a.words[p])+l)>>26,this.words[p]=67108863&i;if(0===l&&p<a.length&&a!==this)for(;p<a.length;p++)this.words[p]=a.words[p];return this.length=Math.max(this.length,p),a!==this&&(this.negative=1),this.strip()},d.prototype.sub=function(t){return this.clone().isub(t)};var Nt=function(t,i,o){var f,e,h,a=t.words,u=i.words,l=o.words,p=0,b=0|a[0],S=8191&b,x=b>>>13,k=0|a[1],C=8191&k,D=k>>>13,Ct=0|a[2],Z=8191&Ct,H=Ct>>>13,ie=0|a[3],G=8191&ie,K=ie>>>13,we=0|a[4],ut=8191&we,tt=we>>>13,Gt=0|a[5],j=8191&Gt,V=Gt>>>13,se=0|a[6],ct=8191&se,lt=se>>>13,be=0|a[7],Q=8191&be,dt=be>>>13,Re=0|a[8],et=8191&Re,z=Re>>>13,oe=0|a[9],pt=8191&oe,$=oe>>>13,ae=0|u[0],mt=8191&ae,P=ae>>>13,Bt=0|u[1],Y=8191&Bt,rt=Bt>>>13,fe=0|u[2],nt=8191&fe,it=fe>>>13,he=0|u[3],X=8191&he,J=he>>>13,Se=0|u[4],st=8191&Se,gt=Se>>>13,xe=0|u[5],ot=8191&xe,vt=xe>>>13,Ee=0|u[6],yt=8191&Ee,_t=Ee>>>13,Te=0|u[7],at=8191&Te,ft=Te>>>13,Ie=0|u[8],Mt=8191&Ie,ht=Ie>>>13,Ae=0|u[9],wt=8191&Ae,bt=Ae>>>13;o.negative=t.negative^i.negative,o.length=19;var ue=(p+(f=Math.imul(S,mt))|0)+((8191&(e=(e=Math.imul(S,P))+Math.imul(x,mt)|0))<<13)|0;p=((h=Math.imul(x,P))+(e>>>13)|0)+(ue>>>26)|0,ue&=67108863,f=Math.imul(C,mt),e=(e=Math.imul(C,P))+Math.imul(D,mt)|0,h=Math.imul(D,P);var ce=(p+(f=f+Math.imul(S,Y)|0)|0)+((8191&(e=(e=e+Math.imul(S,rt)|0)+Math.imul(x,Y)|0))<<13)|0;p=((h=h+Math.imul(x,rt)|0)+(e>>>13)|0)+(ce>>>26)|0,ce&=67108863,f=Math.imul(Z,mt),e=(e=Math.imul(Z,P))+Math.imul(H,mt)|0,h=Math.imul(H,P),f=f+Math.imul(C,Y)|0,e=(e=e+Math.imul(C,rt)|0)+Math.imul(D,Y)|0,h=h+Math.imul(D,rt)|0;var Dt=(p+(f=f+Math.imul(S,nt)|0)|0)+((8191&(e=(e=e+Math.imul(S,it)|0)+Math.imul(x,nt)|0))<<13)|0;p=((h=h+Math.imul(x,it)|0)+(e>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,f=Math.imul(G,mt),e=(e=Math.imul(G,P))+Math.imul(K,mt)|0,h=Math.imul(K,P),f=f+Math.imul(Z,Y)|0,e=(e=e+Math.imul(Z,rt)|0)+Math.imul(H,Y)|0,h=h+Math.imul(H,rt)|0,f=f+Math.imul(C,nt)|0,e=(e=e+Math.imul(C,it)|0)+Math.imul(D,nt)|0,h=h+Math.imul(D,it)|0;var jt=(p+(f=f+Math.imul(S,X)|0)|0)+((8191&(e=(e=e+Math.imul(S,J)|0)+Math.imul(x,X)|0))<<13)|0;p=((h=h+Math.imul(x,J)|0)+(e>>>13)|0)+(jt>>>26)|0,jt&=67108863,f=Math.imul(ut,mt),e=(e=Math.imul(ut,P))+Math.imul(tt,mt)|0,h=Math.imul(tt,P),f=f+Math.imul(G,Y)|0,e=(e=e+Math.imul(G,rt)|0)+Math.imul(K,Y)|0,h=h+Math.imul(K,rt)|0,f=f+Math.imul(Z,nt)|0,e=(e=e+Math.imul(Z,it)|0)+Math.imul(H,nt)|0,h=h+Math.imul(H,it)|0,f=f+Math.imul(C,X)|0,e=(e=e+Math.imul(C,J)|0)+Math.imul(D,X)|0,h=h+Math.imul(D,J)|0;var $t=(p+(f=f+Math.imul(S,st)|0)|0)+((8191&(e=(e=e+Math.imul(S,gt)|0)+Math.imul(x,st)|0))<<13)|0;p=((h=h+Math.imul(x,gt)|0)+(e>>>13)|0)+($t>>>26)|0,$t&=67108863,f=Math.imul(j,mt),e=(e=Math.imul(j,P))+Math.imul(V,mt)|0,h=Math.imul(V,P),f=f+Math.imul(ut,Y)|0,e=(e=e+Math.imul(ut,rt)|0)+Math.imul(tt,Y)|0,h=h+Math.imul(tt,rt)|0,f=f+Math.imul(G,nt)|0,e=(e=e+Math.imul(G,it)|0)+Math.imul(K,nt)|0,h=h+Math.imul(K,it)|0,f=f+Math.imul(Z,X)|0,e=(e=e+Math.imul(Z,J)|0)+Math.imul(H,X)|0,h=h+Math.imul(H,J)|0,f=f+Math.imul(C,st)|0,e=(e=e+Math.imul(C,gt)|0)+Math.imul(D,st)|0,h=h+Math.imul(D,gt)|0;var Jt=(p+(f=f+Math.imul(S,ot)|0)|0)+((8191&(e=(e=e+Math.imul(S,vt)|0)+Math.imul(x,ot)|0))<<13)|0;p=((h=h+Math.imul(x,vt)|0)+(e>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,f=Math.imul(ct,mt),e=(e=Math.imul(ct,P))+Math.imul(lt,mt)|0,h=Math.imul(lt,P),f=f+Math.imul(j,Y)|0,e=(e=e+Math.imul(j,rt)|0)+Math.imul(V,Y)|0,h=h+Math.imul(V,rt)|0,f=f+Math.imul(ut,nt)|0,e=(e=e+Math.imul(ut,it)|0)+Math.imul(tt,nt)|0,h=h+Math.imul(tt,it)|0,f=f+Math.imul(G,X)|0,e=(e=e+Math.imul(G,J)|0)+Math.imul(K,X)|0,h=h+Math.imul(K,J)|0,f=f+Math.imul(Z,st)|0,e=(e=e+Math.imul(Z,gt)|0)+Math.imul(H,st)|0,h=h+Math.imul(H,gt)|0,f=f+Math.imul(C,ot)|0,e=(e=e+Math.imul(C,vt)|0)+Math.imul(D,ot)|0,h=h+Math.imul(D,vt)|0;var Wt=(p+(f=f+Math.imul(S,yt)|0)|0)+((8191&(e=(e=e+Math.imul(S,_t)|0)+Math.imul(x,yt)|0))<<13)|0;p=((h=h+Math.imul(x,_t)|0)+(e>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,f=Math.imul(Q,mt),e=(e=Math.imul(Q,P))+Math.imul(dt,mt)|0,h=Math.imul(dt,P),f=f+Math.imul(ct,Y)|0,e=(e=e+Math.imul(ct,rt)|0)+Math.imul(lt,Y)|0,h=h+Math.imul(lt,rt)|0,f=f+Math.imul(j,nt)|0,e=(e=e+Math.imul(j,it)|0)+Math.imul(V,nt)|0,h=h+Math.imul(V,it)|0,f=f+Math.imul(ut,X)|0,e=(e=e+Math.imul(ut,J)|0)+Math.imul(tt,X)|0,h=h+Math.imul(tt,J)|0,f=f+Math.imul(G,st)|0,e=(e=e+Math.imul(G,gt)|0)+Math.imul(K,st)|0,h=h+Math.imul(K,gt)|0,f=f+Math.imul(Z,ot)|0,e=(e=e+Math.imul(Z,vt)|0)+Math.imul(H,ot)|0,h=h+Math.imul(H,vt)|0,f=f+Math.imul(C,yt)|0,e=(e=e+Math.imul(C,_t)|0)+Math.imul(D,yt)|0,h=h+Math.imul(D,_t)|0;var Kt=(p+(f=f+Math.imul(S,at)|0)|0)+((8191&(e=(e=e+Math.imul(S,ft)|0)+Math.imul(x,at)|0))<<13)|0;p=((h=h+Math.imul(x,ft)|0)+(e>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,f=Math.imul(et,mt),e=(e=Math.imul(et,P))+Math.imul(z,mt)|0,h=Math.imul(z,P),f=f+Math.imul(Q,Y)|0,e=(e=e+Math.imul(Q,rt)|0)+Math.imul(dt,Y)|0,h=h+Math.imul(dt,rt)|0,f=f+Math.imul(ct,nt)|0,e=(e=e+Math.imul(ct,it)|0)+Math.imul(lt,nt)|0,h=h+Math.imul(lt,it)|0,f=f+Math.imul(j,X)|0,e=(e=e+Math.imul(j,J)|0)+Math.imul(V,X)|0,h=h+Math.imul(V,J)|0,f=f+Math.imul(ut,st)|0,e=(e=e+Math.imul(ut,gt)|0)+Math.imul(tt,st)|0,h=h+Math.imul(tt,gt)|0,f=f+Math.imul(G,ot)|0,e=(e=e+Math.imul(G,vt)|0)+Math.imul(K,ot)|0,h=h+Math.imul(K,vt)|0,f=f+Math.imul(Z,yt)|0,e=(e=e+Math.imul(Z,_t)|0)+Math.imul(H,yt)|0,h=h+Math.imul(H,_t)|0,f=f+Math.imul(C,at)|0,e=(e=e+Math.imul(C,ft)|0)+Math.imul(D,at)|0,h=h+Math.imul(D,ft)|0;var Vt=(p+(f=f+Math.imul(S,Mt)|0)|0)+((8191&(e=(e=e+Math.imul(S,ht)|0)+Math.imul(x,Mt)|0))<<13)|0;p=((h=h+Math.imul(x,ht)|0)+(e>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,f=Math.imul(pt,mt),e=(e=Math.imul(pt,P))+Math.imul($,mt)|0,h=Math.imul($,P),f=f+Math.imul(et,Y)|0,e=(e=e+Math.imul(et,rt)|0)+Math.imul(z,Y)|0,h=h+Math.imul(z,rt)|0,f=f+Math.imul(Q,nt)|0,e=(e=e+Math.imul(Q,it)|0)+Math.imul(dt,nt)|0,h=h+Math.imul(dt,it)|0,f=f+Math.imul(ct,X)|0,e=(e=e+Math.imul(ct,J)|0)+Math.imul(lt,X)|0,h=h+Math.imul(lt,J)|0,f=f+Math.imul(j,st)|0,e=(e=e+Math.imul(j,gt)|0)+Math.imul(V,st)|0,h=h+Math.imul(V,gt)|0,f=f+Math.imul(ut,ot)|0,e=(e=e+Math.imul(ut,vt)|0)+Math.imul(tt,ot)|0,h=h+Math.imul(tt,vt)|0,f=f+Math.imul(G,yt)|0,e=(e=e+Math.imul(G,_t)|0)+Math.imul(K,yt)|0,h=h+Math.imul(K,_t)|0,f=f+Math.imul(Z,at)|0,e=(e=e+Math.imul(Z,ft)|0)+Math.imul(H,at)|0,h=h+Math.imul(H,ft)|0,f=f+Math.imul(C,Mt)|0,e=(e=e+Math.imul(C,ht)|0)+Math.imul(D,Mt)|0,h=h+Math.imul(D,ht)|0;var Qt=(p+(f=f+Math.imul(S,wt)|0)|0)+((8191&(e=(e=e+Math.imul(S,bt)|0)+Math.imul(x,wt)|0))<<13)|0;p=((h=h+Math.imul(x,bt)|0)+(e>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,f=Math.imul(pt,Y),e=(e=Math.imul(pt,rt))+Math.imul($,Y)|0,h=Math.imul($,rt),f=f+Math.imul(et,nt)|0,e=(e=e+Math.imul(et,it)|0)+Math.imul(z,nt)|0,h=h+Math.imul(z,it)|0,f=f+Math.imul(Q,X)|0,e=(e=e+Math.imul(Q,J)|0)+Math.imul(dt,X)|0,h=h+Math.imul(dt,J)|0,f=f+Math.imul(ct,st)|0,e=(e=e+Math.imul(ct,gt)|0)+Math.imul(lt,st)|0,h=h+Math.imul(lt,gt)|0,f=f+Math.imul(j,ot)|0,e=(e=e+Math.imul(j,vt)|0)+Math.imul(V,ot)|0,h=h+Math.imul(V,vt)|0,f=f+Math.imul(ut,yt)|0,e=(e=e+Math.imul(ut,_t)|0)+Math.imul(tt,yt)|0,h=h+Math.imul(tt,_t)|0,f=f+Math.imul(G,at)|0,e=(e=e+Math.imul(G,ft)|0)+Math.imul(K,at)|0,h=h+Math.imul(K,ft)|0,f=f+Math.imul(Z,Mt)|0,e=(e=e+Math.imul(Z,ht)|0)+Math.imul(H,Mt)|0,h=h+Math.imul(H,ht)|0;var le=(p+(f=f+Math.imul(C,wt)|0)|0)+((8191&(e=(e=e+Math.imul(C,bt)|0)+Math.imul(D,wt)|0))<<13)|0;p=((h=h+Math.imul(D,bt)|0)+(e>>>13)|0)+(le>>>26)|0,le&=67108863,f=Math.imul(pt,nt),e=(e=Math.imul(pt,it))+Math.imul($,nt)|0,h=Math.imul($,it),f=f+Math.imul(et,X)|0,e=(e=e+Math.imul(et,J)|0)+Math.imul(z,X)|0,h=h+Math.imul(z,J)|0,f=f+Math.imul(Q,st)|0,e=(e=e+Math.imul(Q,gt)|0)+Math.imul(dt,st)|0,h=h+Math.imul(dt,gt)|0,f=f+Math.imul(ct,ot)|0,e=(e=e+Math.imul(ct,vt)|0)+Math.imul(lt,ot)|0,h=h+Math.imul(lt,vt)|0,f=f+Math.imul(j,yt)|0,e=(e=e+Math.imul(j,_t)|0)+Math.imul(V,yt)|0,h=h+Math.imul(V,_t)|0,f=f+Math.imul(ut,at)|0,e=(e=e+Math.imul(ut,ft)|0)+Math.imul(tt,at)|0,h=h+Math.imul(tt,ft)|0,f=f+Math.imul(G,Mt)|0,e=(e=e+Math.imul(G,ht)|0)+Math.imul(K,Mt)|0,h=h+Math.imul(K,ht)|0;var de=(p+(f=f+Math.imul(Z,wt)|0)|0)+((8191&(e=(e=e+Math.imul(Z,bt)|0)+Math.imul(H,wt)|0))<<13)|0;p=((h=h+Math.imul(H,bt)|0)+(e>>>13)|0)+(de>>>26)|0,de&=67108863,f=Math.imul(pt,X),e=(e=Math.imul(pt,J))+Math.imul($,X)|0,h=Math.imul($,J),f=f+Math.imul(et,st)|0,e=(e=e+Math.imul(et,gt)|0)+Math.imul(z,st)|0,h=h+Math.imul(z,gt)|0,f=f+Math.imul(Q,ot)|0,e=(e=e+Math.imul(Q,vt)|0)+Math.imul(dt,ot)|0,h=h+Math.imul(dt,vt)|0,f=f+Math.imul(ct,yt)|0,e=(e=e+Math.imul(ct,_t)|0)+Math.imul(lt,yt)|0,h=h+Math.imul(lt,_t)|0,f=f+Math.imul(j,at)|0,e=(e=e+Math.imul(j,ft)|0)+Math.imul(V,at)|0,h=h+Math.imul(V,ft)|0,f=f+Math.imul(ut,Mt)|0,e=(e=e+Math.imul(ut,ht)|0)+Math.imul(tt,Mt)|0,h=h+Math.imul(tt,ht)|0;var pe=(p+(f=f+Math.imul(G,wt)|0)|0)+((8191&(e=(e=e+Math.imul(G,bt)|0)+Math.imul(K,wt)|0))<<13)|0;p=((h=h+Math.imul(K,bt)|0)+(e>>>13)|0)+(pe>>>26)|0,pe&=67108863,f=Math.imul(pt,st),e=(e=Math.imul(pt,gt))+Math.imul($,st)|0,h=Math.imul($,gt),f=f+Math.imul(et,ot)|0,e=(e=e+Math.imul(et,vt)|0)+Math.imul(z,ot)|0,h=h+Math.imul(z,vt)|0,f=f+Math.imul(Q,yt)|0,e=(e=e+Math.imul(Q,_t)|0)+Math.imul(dt,yt)|0,h=h+Math.imul(dt,_t)|0,f=f+Math.imul(ct,at)|0,e=(e=e+Math.imul(ct,ft)|0)+Math.imul(lt,at)|0,h=h+Math.imul(lt,ft)|0,f=f+Math.imul(j,Mt)|0,e=(e=e+Math.imul(j,ht)|0)+Math.imul(V,Mt)|0,h=h+Math.imul(V,ht)|0;var me=(p+(f=f+Math.imul(ut,wt)|0)|0)+((8191&(e=(e=e+Math.imul(ut,bt)|0)+Math.imul(tt,wt)|0))<<13)|0;p=((h=h+Math.imul(tt,bt)|0)+(e>>>13)|0)+(me>>>26)|0,me&=67108863,f=Math.imul(pt,ot),e=(e=Math.imul(pt,vt))+Math.imul($,ot)|0,h=Math.imul($,vt),f=f+Math.imul(et,yt)|0,e=(e=e+Math.imul(et,_t)|0)+Math.imul(z,yt)|0,h=h+Math.imul(z,_t)|0,f=f+Math.imul(Q,at)|0,e=(e=e+Math.imul(Q,ft)|0)+Math.imul(dt,at)|0,h=h+Math.imul(dt,ft)|0,f=f+Math.imul(ct,Mt)|0,e=(e=e+Math.imul(ct,ht)|0)+Math.imul(lt,Mt)|0,h=h+Math.imul(lt,ht)|0;var ge=(p+(f=f+Math.imul(j,wt)|0)|0)+((8191&(e=(e=e+Math.imul(j,bt)|0)+Math.imul(V,wt)|0))<<13)|0;p=((h=h+Math.imul(V,bt)|0)+(e>>>13)|0)+(ge>>>26)|0,ge&=67108863,f=Math.imul(pt,yt),e=(e=Math.imul(pt,_t))+Math.imul($,yt)|0,h=Math.imul($,_t),f=f+Math.imul(et,at)|0,e=(e=e+Math.imul(et,ft)|0)+Math.imul(z,at)|0,h=h+Math.imul(z,ft)|0,f=f+Math.imul(Q,Mt)|0,e=(e=e+Math.imul(Q,ht)|0)+Math.imul(dt,Mt)|0,h=h+Math.imul(dt,ht)|0;var zt=(p+(f=f+Math.imul(ct,wt)|0)|0)+((8191&(e=(e=e+Math.imul(ct,bt)|0)+Math.imul(lt,wt)|0))<<13)|0;p=((h=h+Math.imul(lt,bt)|0)+(e>>>13)|0)+(zt>>>26)|0,zt&=67108863,f=Math.imul(pt,at),e=(e=Math.imul(pt,ft))+Math.imul($,at)|0,h=Math.imul($,ft),f=f+Math.imul(et,Mt)|0,e=(e=e+Math.imul(et,ht)|0)+Math.imul(z,Mt)|0,h=h+Math.imul(z,ht)|0;var Yt=(p+(f=f+Math.imul(Q,wt)|0)|0)+((8191&(e=(e=e+Math.imul(Q,bt)|0)+Math.imul(dt,wt)|0))<<13)|0;p=((h=h+Math.imul(dt,bt)|0)+(e>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,f=Math.imul(pt,Mt),e=(e=Math.imul(pt,ht))+Math.imul($,Mt)|0,h=Math.imul($,ht);var ve=(p+(f=f+Math.imul(et,wt)|0)|0)+((8191&(e=(e=e+Math.imul(et,bt)|0)+Math.imul(z,wt)|0))<<13)|0;p=((h=h+Math.imul(z,bt)|0)+(e>>>13)|0)+(ve>>>26)|0,ve&=67108863;var Xt=(p+(f=Math.imul(pt,wt))|0)+((8191&(e=(e=Math.imul(pt,bt))+Math.imul($,wt)|0))<<13)|0;return p=((h=Math.imul($,bt))+(e>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,l[0]=ue,l[1]=ce,l[2]=Dt,l[3]=jt,l[4]=$t,l[5]=Jt,l[6]=Wt,l[7]=Kt,l[8]=Vt,l[9]=Qt,l[10]=le,l[11]=de,l[12]=pe,l[13]=me,l[14]=ge,l[15]=zt,l[16]=Yt,l[17]=ve,l[18]=Xt,0!==p&&(l[19]=p,o.length++),o};function y(c,t,i){return(new _).mulp(c,t,i)}function _(c,t){this.x=c,this.y=t}Math.imul||(Nt=Ot),d.prototype.mulTo=function(t,i){var o,a=this.length+t.length;return o=10===this.length&&10===t.length?Nt(this,t,i):a<63?Ot(this,t,i):a<1024?function Ft(c,t,i){i.negative=t.negative^c.negative,i.length=c.length+t.length;for(var o=0,a=0,u=0;u<i.length-1;u++){var l=a;a=0;for(var p=67108863&o,f=Math.min(u,t.length-1),e=Math.max(0,u-c.length+1);e<=f;e++){var x=(0|c.words[u-e])*(0|t.words[e]),k=67108863&x;p=67108863&(k=k+p|0),a+=(l=(l=l+(x/67108864|0)|0)+(k>>>26)|0)>>>26,l&=67108863}i.words[u]=p,o=l,l=a}return 0!==o?i.words[u]=o:i.length--,i.strip()}(this,t,i):y(this,t,i),o},_.prototype.makeRBT=function(t){for(var i=new Array(t),o=d.prototype._countBits(t)-1,a=0;a<t;a++)i[a]=this.revBin(a,o,t);return i},_.prototype.revBin=function(t,i,o){if(0===t||t===o-1)return t;for(var a=0,u=0;u<i;u++)a|=(1&t)<<i-u-1,t>>=1;return a},_.prototype.permute=function(t,i,o,a,u,l){for(var p=0;p<l;p++)a[p]=i[t[p]],u[p]=o[t[p]]},_.prototype.transform=function(t,i,o,a,u,l){this.permute(l,t,i,o,a,u);for(var p=1;p<u;p<<=1)for(var f=p<<1,e=Math.cos(2*Math.PI/f),h=Math.sin(2*Math.PI/f),b=0;b<u;b+=f)for(var S=e,x=h,k=0;k<p;k++){var C=o[b+k],D=a[b+k],Ct=o[b+k+p],Z=a[b+k+p],H=S*Ct-x*Z;Z=S*Z+x*Ct,o[b+k]=C+(Ct=H),a[b+k]=D+Z,o[b+k+p]=C-Ct,a[b+k+p]=D-Z,k!==f&&(H=e*S-h*x,x=e*x+h*S,S=H)}},_.prototype.guessLen13b=function(t,i){var o=1|Math.max(i,t),a=1&o,u=0;for(o=o/2|0;o;o>>>=1)u++;return 1<<u+1+a},_.prototype.conjugate=function(t,i,o){if(!(o<=1))for(var a=0;a<o/2;a++){var u=t[a];t[a]=t[o-a-1],t[o-a-1]=u,u=i[a],i[a]=-i[o-a-1],i[o-a-1]=-u}},_.prototype.normalize13b=function(t,i){for(var o=0,a=0;a<i/2;a++){var u=8192*Math.round(t[2*a+1]/i)+Math.round(t[2*a]/i)+o;t[a]=67108863&u,o=u<67108864?0:u/67108864|0}return t},_.prototype.convert13b=function(t,i,o,a){for(var u=0,l=0;l<i;l++)o[2*l]=8191&(u+=0|t[l]),o[2*l+1]=8191&(u>>>=13),u>>>=13;for(l=2*i;l<a;++l)o[l]=0;v(0===u),v(0==(-8192&u))},_.prototype.stub=function(t){for(var i=new Array(t),o=0;o<t;o++)i[o]=0;return i},_.prototype.mulp=function(t,i,o){var a=2*this.guessLen13b(t.length,i.length),u=this.makeRBT(a),l=this.stub(a),p=new Array(a),f=new Array(a),e=new Array(a),h=new Array(a),b=new Array(a),S=new Array(a),x=o.words;x.length=a,this.convert13b(t.words,t.length,p,a),this.convert13b(i.words,i.length,h,a),this.transform(p,l,f,e,a,u),this.transform(h,l,b,S,a,u);for(var k=0;k<a;k++){var C=f[k]*b[k]-e[k]*S[k];e[k]=f[k]*S[k]+e[k]*b[k],f[k]=C}return this.conjugate(f,e,a),this.transform(f,e,x,l,a,u),this.conjugate(x,l,a),this.normalize13b(x,a),o.negative=t.negative^i.negative,o.length=t.length+i.length,o.strip()},d.prototype.mul=function(t){var i=new d(null);return i.words=new Array(this.length+t.length),this.mulTo(t,i)},d.prototype.mulf=function(t){var i=new d(null);return i.words=new Array(this.length+t.length),y(this,t,i)},d.prototype.imul=function(t){return this.clone().mulTo(t,this)},d.prototype.imuln=function(t){v("number"==typeof t),v(t<67108864);for(var i=0,o=0;o<this.length;o++){var a=(0|this.words[o])*t,u=(67108863&a)+(67108863&i);i>>=26,i+=a/67108864|0,i+=u>>>26,this.words[o]=67108863&u}return 0!==i&&(this.words[o]=i,this.length++),this},d.prototype.muln=function(t){return this.clone().imuln(t)},d.prototype.sqr=function(){return this.mul(this)},d.prototype.isqr=function(){return this.imul(this.clone())},d.prototype.pow=function(t){var i=function Pt(c){for(var t=new Array(c.bitLength()),i=0;i<t.length;i++){var a=i%26;t[i]=(c.words[i/26|0]&1<<a)>>>a}return t}(t);if(0===i.length)return new d(1);for(var o=this,a=0;a<i.length&&0===i[a];a++,o=o.sqr());if(++a<i.length)for(var u=o.sqr();a<i.length;a++,u=u.sqr())0!==i[a]&&(o=o.mul(u));return o},d.prototype.iushln=function(t){v("number"==typeof t&&t>=0);var u,i=t%26,o=(t-i)/26,a=67108863>>>26-i<<26-i;if(0!==i){var l=0;for(u=0;u<this.length;u++){var p=this.words[u]&a;this.words[u]=(0|this.words[u])-p<<i|l,l=p>>>26-i}l&&(this.words[u]=l,this.length++)}if(0!==o){for(u=this.length-1;u>=0;u--)this.words[u+o]=this.words[u];for(u=0;u<o;u++)this.words[u]=0;this.length+=o}return this.strip()},d.prototype.ishln=function(t){return v(0===this.negative),this.iushln(t)},d.prototype.iushrn=function(t,i,o){var a;v("number"==typeof t&&t>=0),a=i?(i-i%26)/26:0;var u=t%26,l=Math.min((t-u)/26,this.length),p=67108863^67108863>>>u<<u,f=o;if(a-=l,a=Math.max(0,a),f){for(var e=0;e<l;e++)f.words[e]=this.words[e];f.length=l}if(0!==l)if(this.length>l)for(this.length-=l,e=0;e<this.length;e++)this.words[e]=this.words[e+l];else this.words[0]=0,this.length=1;var h=0;for(e=this.length-1;e>=0&&(0!==h||e>=a);e--){var b=0|this.words[e];this.words[e]=h<<26-u|b>>>u,h=b&p}return f&&0!==h&&(f.words[f.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},d.prototype.ishrn=function(t,i,o){return v(0===this.negative),this.iushrn(t,i,o)},d.prototype.shln=function(t){return this.clone().ishln(t)},d.prototype.ushln=function(t){return this.clone().iushln(t)},d.prototype.shrn=function(t){return this.clone().ishrn(t)},d.prototype.ushrn=function(t){return this.clone().iushrn(t)},d.prototype.testn=function(t){v("number"==typeof t&&t>=0);var i=t%26,o=(t-i)/26;return!(this.length<=o||!(this.words[o]&1<<i))},d.prototype.imaskn=function(t){v("number"==typeof t&&t>=0);var i=t%26,o=(t-i)/26;return v(0===this.negative,"imaskn works only with positive numbers"),this.length<=o?this:(0!==i&&o++,this.length=Math.min(o,this.length),0!==i&&(this.words[this.length-1]&=67108863^67108863>>>i<<i),this.strip())},d.prototype.maskn=function(t){return this.clone().imaskn(t)},d.prototype.iaddn=function(t){return v("number"==typeof t),v(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},d.prototype._iaddn=function(t){this.words[0]+=t;for(var i=0;i<this.length&&this.words[i]>=67108864;i++)this.words[i]-=67108864,i===this.length-1?this.words[i+1]=1:this.words[i+1]++;return this.length=Math.max(this.length,i+1),this},d.prototype.isubn=function(t){if(v("number"==typeof t),v(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var i=0;i<this.length&&this.words[i]<0;i++)this.words[i]+=67108864,this.words[i+1]-=1;return this.strip()},d.prototype.addn=function(t){return this.clone().iaddn(t)},d.prototype.subn=function(t){return this.clone().isubn(t)},d.prototype.iabs=function(){return this.negative=0,this},d.prototype.abs=function(){return this.clone().iabs()},d.prototype._ishlnsubmul=function(t,i,o){var u;this._expand(t.length+o);var l,p=0;for(u=0;u<t.length;u++){l=(0|this.words[u+o])+p;var f=(0|t.words[u])*i;p=((l-=67108863&f)>>26)-(f/67108864|0),this.words[u+o]=67108863&l}for(;u<this.length-o;u++)p=(l=(0|this.words[u+o])+p)>>26,this.words[u+o]=67108863&l;if(0===p)return this.strip();for(v(-1===p),p=0,u=0;u<this.length;u++)p=(l=-(0|this.words[u])+p)>>26,this.words[u]=67108863&l;return this.negative=1,this.strip()},d.prototype._wordDiv=function(t,i){var o,a=this.clone(),u=t,l=0|u.words[u.length-1];0!=(o=26-this._countBits(l))&&(u=u.ushln(o),a.iushln(o),l=0|u.words[u.length-1]);var e,f=a.length-u.length;if("mod"!==i){(e=new d(null)).length=f+1,e.words=new Array(e.length);for(var h=0;h<e.length;h++)e.words[h]=0}var b=a.clone()._ishlnsubmul(u,1,f);0===b.negative&&(a=b,e&&(e.words[f]=1));for(var S=f-1;S>=0;S--){var x=67108864*(0|a.words[u.length+S])+(0|a.words[u.length+S-1]);for(x=Math.min(x/l|0,67108863),a._ishlnsubmul(u,x,S);0!==a.negative;)x--,a.negative=0,a._ishlnsubmul(u,1,S),a.isZero()||(a.negative^=1);e&&(e.words[S]=x)}return e&&e.strip(),a.strip(),"div"!==i&&0!==o&&a.iushrn(o),{div:e||null,mod:a}},d.prototype.divmod=function(t,i,o){return v(!t.isZero()),this.isZero()?{div:new d(0),mod:new d(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,i),"mod"!==i&&(a=l.div.neg()),"div"!==i&&(u=l.mod.neg(),o&&0!==u.negative&&u.iadd(t)),{div:a,mod:u}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),i),"mod"!==i&&(a=l.div.neg()),{div:a,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),i),"div"!==i&&(u=l.mod.neg(),o&&0!==u.negative&&u.isub(t)),{div:l.div,mod:u}):t.length>this.length||this.cmp(t)<0?{div:new d(0),mod:this}:1===t.length?"div"===i?{div:this.divn(t.words[0]),mod:null}:"mod"===i?{div:null,mod:new d(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new d(this.modn(t.words[0]))}:this._wordDiv(t,i);var a,u,l},d.prototype.div=function(t){return this.divmod(t,"div",!1).div},d.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},d.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},d.prototype.divRound=function(t){var i=this.divmod(t);if(i.mod.isZero())return i.div;var o=0!==i.div.negative?i.mod.isub(t):i.mod,a=t.ushrn(1),u=t.andln(1),l=o.cmp(a);return l<0||1===u&&0===l?i.div:0!==i.div.negative?i.div.isubn(1):i.div.iaddn(1)},d.prototype.modn=function(t){v(t<=67108863);for(var i=(1<<26)%t,o=0,a=this.length-1;a>=0;a--)o=(i*o+(0|this.words[a]))%t;return o},d.prototype.idivn=function(t){v(t<=67108863);for(var i=0,o=this.length-1;o>=0;o--){var a=(0|this.words[o])+67108864*i;this.words[o]=a/t|0,i=a%t}return this.strip()},d.prototype.divn=function(t){return this.clone().idivn(t)},d.prototype.egcd=function(t){v(0===t.negative),v(!t.isZero());var i=this,o=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var a=new d(1),u=new d(0),l=new d(0),p=new d(1),f=0;i.isEven()&&o.isEven();)i.iushrn(1),o.iushrn(1),++f;for(var e=o.clone(),h=i.clone();!i.isZero();){for(var b=0,S=1;0==(i.words[0]&S)&&b<26;++b,S<<=1);if(b>0)for(i.iushrn(b);b-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(e),u.isub(h)),a.iushrn(1),u.iushrn(1);for(var x=0,k=1;0==(o.words[0]&k)&&x<26;++x,k<<=1);if(x>0)for(o.iushrn(x);x-- >0;)(l.isOdd()||p.isOdd())&&(l.iadd(e),p.isub(h)),l.iushrn(1),p.iushrn(1);i.cmp(o)>=0?(i.isub(o),a.isub(l),u.isub(p)):(o.isub(i),l.isub(a),p.isub(u))}return{a:l,b:p,gcd:o.iushln(f)}},d.prototype._invmp=function(t){v(0===t.negative),v(!t.isZero());var b,i=this,o=t.clone();i=0!==i.negative?i.umod(t):i.clone();for(var a=new d(1),u=new d(0),l=o.clone();i.cmpn(1)>0&&o.cmpn(1)>0;){for(var p=0,f=1;0==(i.words[0]&f)&&p<26;++p,f<<=1);if(p>0)for(i.iushrn(p);p-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var e=0,h=1;0==(o.words[0]&h)&&e<26;++e,h<<=1);if(e>0)for(o.iushrn(e);e-- >0;)u.isOdd()&&u.iadd(l),u.iushrn(1);i.cmp(o)>=0?(i.isub(o),a.isub(u)):(o.isub(i),u.isub(a))}return(b=0===i.cmpn(1)?a:u).cmpn(0)<0&&b.iadd(t),b},d.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var i=this.clone(),o=t.clone();i.negative=0,o.negative=0;for(var a=0;i.isEven()&&o.isEven();a++)i.iushrn(1),o.iushrn(1);for(;;){for(;i.isEven();)i.iushrn(1);for(;o.isEven();)o.iushrn(1);var u=i.cmp(o);if(u<0){var l=i;i=o,o=l}else if(0===u||0===o.cmpn(1))break;i.isub(o)}return o.iushln(a)},d.prototype.invm=function(t){return this.egcd(t).a.umod(t)},d.prototype.isEven=function(){return 0==(1&this.words[0])},d.prototype.isOdd=function(){return 1==(1&this.words[0])},d.prototype.andln=function(t){return this.words[0]&t},d.prototype.bincn=function(t){v("number"==typeof t);var i=t%26,o=(t-i)/26,a=1<<i;if(this.length<=o)return this._expand(o+1),this.words[o]|=a,this;for(var u=a,l=o;0!==u&&l<this.length;l++){var p=0|this.words[l];u=(p+=u)>>>26,this.words[l]=p&=67108863}return 0!==u&&(this.words[l]=u,this.length++),this},d.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},d.prototype.cmpn=function(t){var o,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)o=1;else{i&&(t=-t),v(t<=67108863,"Number is too big");var a=0|this.words[0];o=a===t?0:a<t?-1:1}return 0!==this.negative?0|-o:o},d.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var i=this.ucmp(t);return 0!==this.negative?0|-i:i},d.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var i=0,o=this.length-1;o>=0;o--){var a=0|this.words[o],u=0|t.words[o];if(a!==u){a<u?i=-1:a>u&&(i=1);break}}return i},d.prototype.gtn=function(t){return 1===this.cmpn(t)},d.prototype.gt=function(t){return 1===this.cmp(t)},d.prototype.gten=function(t){return this.cmpn(t)>=0},d.prototype.gte=function(t){return this.cmp(t)>=0},d.prototype.ltn=function(t){return-1===this.cmpn(t)},d.prototype.lt=function(t){return-1===this.cmp(t)},d.prototype.lten=function(t){return this.cmpn(t)<=0},d.prototype.lte=function(t){return this.cmp(t)<=0},d.prototype.eqn=function(t){return 0===this.cmpn(t)},d.prototype.eq=function(t){return 0===this.cmp(t)},d.red=function(t){return new W(t)},d.prototype.toRed=function(t){return v(!this.red,"Already a number in reduction context"),v(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},d.prototype.fromRed=function(){return v(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},d.prototype._forceRed=function(t){return this.red=t,this},d.prototype.forceRed=function(t){return v(!this.red,"Already a number in reduction context"),this._forceRed(t)},d.prototype.redAdd=function(t){return v(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},d.prototype.redIAdd=function(t){return v(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},d.prototype.redSub=function(t){return v(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},d.prototype.redISub=function(t){return v(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},d.prototype.redShl=function(t){return v(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},d.prototype.redMul=function(t){return v(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},d.prototype.redIMul=function(t){return v(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},d.prototype.redSqr=function(){return v(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},d.prototype.redISqr=function(){return v(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},d.prototype.redSqrt=function(){return v(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},d.prototype.redInvm=function(){return v(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},d.prototype.redNeg=function(){return v(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},d.prototype.redPow=function(t){return v(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var R={k256:null,p224:null,p192:null,p25519:null};function M(c,t){this.name=c,this.p=new d(t,16),this.n=this.p.bitLength(),this.k=new d(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function A(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function q(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function O(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function xt(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function W(c){if("string"==typeof c){var t=d._prime(c);this.m=t.p,this.prime=t}else v(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}function Lt(c){W.call(this,c),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new d(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}M.prototype._tmp=function(){var t=new d(null);return t.words=new Array(Math.ceil(this.n/13)),t},M.prototype.ireduce=function(t){var o,i=t;do{this.split(i,this.tmp),o=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(o>this.n);var a=o<this.n?-1:i.ucmp(this.p);return 0===a?(i.words[0]=0,i.length=1):a>0?i.isub(this.p):i.strip(),i},M.prototype.split=function(t,i){t.iushrn(this.n,0,i)},M.prototype.imulK=function(t){return t.imul(this.k)},N(A,M),A.prototype.split=function(t,i){for(var o=4194303,a=Math.min(t.length,9),u=0;u<a;u++)i.words[u]=t.words[u];if(i.length=a,t.length<=9)return t.words[0]=0,void(t.length=1);var l=t.words[9];for(i.words[i.length++]=l&o,u=10;u<t.length;u++){var p=0|t.words[u];t.words[u-10]=(p&o)<<4|l>>>22,l=p}t.words[u-10]=l>>>=22,t.length-=0===l&&t.length>10?10:9},A.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var i=0,o=0;o<t.length;o++){var a=0|t.words[o];t.words[o]=67108863&(i+=977*a),i=64*a+(i/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},N(q,M),N(O,M),N(xt,M),xt.prototype.imulK=function(t){for(var i=0,o=0;o<t.length;o++){var a=19*(0|t.words[o])+i,u=67108863&a;a>>>=26,t.words[o]=u,i=a}return 0!==i&&(t.words[t.length++]=i),t},d._prime=function(t){if(R[t])return R[t];var i;if("k256"===t)i=new A;else if("p224"===t)i=new q;else if("p192"===t)i=new O;else{if("p25519"!==t)throw new Error("Unknown prime "+t);i=new xt}return R[t]=i,i},W.prototype._verify1=function(t){v(0===t.negative,"red works only with positives"),v(t.red,"red works only with red numbers")},W.prototype._verify2=function(t,i){v(0==(t.negative|i.negative),"red works only with positives"),v(t.red&&t.red===i.red,"red works only with red numbers")},W.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},W.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},W.prototype.add=function(t,i){this._verify2(t,i);var o=t.add(i);return o.cmp(this.m)>=0&&o.isub(this.m),o._forceRed(this)},W.prototype.iadd=function(t,i){this._verify2(t,i);var o=t.iadd(i);return o.cmp(this.m)>=0&&o.isub(this.m),o},W.prototype.sub=function(t,i){this._verify2(t,i);var o=t.sub(i);return o.cmpn(0)<0&&o.iadd(this.m),o._forceRed(this)},W.prototype.isub=function(t,i){this._verify2(t,i);var o=t.isub(i);return o.cmpn(0)<0&&o.iadd(this.m),o},W.prototype.shl=function(t,i){return this._verify1(t),this.imod(t.ushln(i))},W.prototype.imul=function(t,i){return this._verify2(t,i),this.imod(t.imul(i))},W.prototype.mul=function(t,i){return this._verify2(t,i),this.imod(t.mul(i))},W.prototype.isqr=function(t){return this.imul(t,t.clone())},W.prototype.sqr=function(t){return this.mul(t,t)},W.prototype.sqrt=function(t){if(t.isZero())return t.clone();var i=this.m.andln(3);if(v(i%2==1),3===i){var o=this.m.add(new d(1)).iushrn(2);return this.pow(t,o)}for(var a=this.m.subn(1),u=0;!a.isZero()&&0===a.andln(1);)u++,a.iushrn(1);v(!a.isZero());var l=new d(1).toRed(this),p=l.redNeg(),f=this.m.subn(1).iushrn(1),e=this.m.bitLength();for(e=new d(2*e*e).toRed(this);0!==this.pow(e,f).cmp(p);)e.redIAdd(p);for(var h=this.pow(e,a),b=this.pow(t,a.addn(1).iushrn(1)),S=this.pow(t,a),x=u;0!==S.cmp(l);){for(var k=S,C=0;0!==k.cmp(l);C++)k=k.redSqr();v(C<x);var D=this.pow(h,new d(1).iushln(x-C-1));b=b.redMul(D),h=D.redSqr(),S=S.redMul(h),x=C}return b},W.prototype.invm=function(t){var i=t._invmp(this.m);return 0!==i.negative?(i.negative=0,this.imod(i).redNeg()):this.imod(i)},W.prototype.pow=function(t,i){if(i.isZero())return new d(1).toRed(this);if(0===i.cmpn(1))return t.clone();var a=new Array(16);a[0]=new d(1).toRed(this),a[1]=t;for(var u=2;u<a.length;u++)a[u]=this.mul(a[u-1],t);var l=a[0],p=0,f=0,e=i.bitLength()%26;for(0===e&&(e=26),u=i.length-1;u>=0;u--){for(var h=i.words[u],b=e-1;b>=0;b--){var S=h>>b&1;l!==a[0]&&(l=this.sqr(l)),0!==S||0!==p?(p<<=1,p|=S,(4==++f||0===u&&0===b)&&(l=this.mul(l,a[p]),f=0,p=0)):f=0}e=26}return l},W.prototype.convertTo=function(t){var i=t.umod(this.m);return i===t?i.clone():i},W.prototype.convertFrom=function(t){var i=t.clone();return i.red=null,i},d.mont=function(t){return new Lt(t)},N(Lt,W),Lt.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},Lt.prototype.convertFrom=function(t){var i=this.imod(t.mul(this.rinv));return i.red=null,i},Lt.prototype.imul=function(t,i){if(t.isZero()||i.isZero())return t.words[0]=0,t.length=1,t;var o=t.imul(i),a=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=o.isub(a).iushrn(this.shift),l=u;return u.cmp(this.m)>=0?l=u.isub(this.m):u.cmpn(0)<0&&(l=u.iadd(this.m)),l._forceRed(this)},Lt.prototype.mul=function(t,i){if(t.isZero()||i.isZero())return new d(0)._forceRed(this);var o=t.mul(i),a=o.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),u=o.isub(a).iushrn(this.shift),l=u;return u.cmp(this.m)>=0?l=u.isub(this.m):u.cmpn(0)<0&&(l=u.iadd(this.m)),l._forceRed(this)},Lt.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Rt=I.nmd(Rt),this)},76617:(Rt,T,I)=>{"use strict";const U=I(7407),E=I(65361),v=I(95967);function St(y){if("string"!=typeof y||1!==y.length)throw new TypeError("arrayFormatSeparator must be single character string")}function F(y,_){return _.encode?_.strict?U(y):encodeURIComponent(y):y}function It(y,_){return _.decode?E(y):y}function At(y){return Array.isArray(y)?y.sort():"object"==typeof y?At(Object.keys(y)).sort((_,R)=>Number(_)-Number(R)).map(_=>y[_]):y}function kt(y){const _=y.indexOf("#");return-1!==_&&(y=y.slice(0,_)),y}function Ot(y){const _=(y=kt(y)).indexOf("?");return-1===_?"":y.slice(_+1)}function Nt(y,_){return _.parseNumbers&&!Number.isNaN(Number(y))&&"string"==typeof y&&""!==y.trim()?y=Number(y):_.parseBooleans&&null!==y&&("true"===y.toLowerCase()||"false"===y.toLowerCase())&&(y="true"===y.toLowerCase()),y}function Ft(y,_){St((_=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},_)).arrayFormatSeparator);const R=function L(y){let _;switch(y.arrayFormat){case"index":return(R,M,A)=>{_=/\[(\d*)\]$/.exec(R),R=R.replace(/\[\d*\]$/,""),_?(void 0===A[R]&&(A[R]={}),A[R][_[1]]=M):A[R]=M};case"bracket":return(R,M,A)=>{_=/(\[\])$/.exec(R),A[R=R.replace(/\[\]$/,"")]=_?void 0!==A[R]?[].concat(A[R],M):[M]:M};case"comma":case"separator":return(R,M,A)=>{const O="string"==typeof M&&M.split("").indexOf(y.arrayFormatSeparator)>-1?M.split(y.arrayFormatSeparator).map(xt=>It(xt,y)):null===M?M:It(M,y);A[R]=O};default:return(R,M,A)=>{A[R]=void 0!==A[R]?[].concat(A[R],M):M}}}(_),M=Object.create(null);if("string"!=typeof y||!(y=y.trim().replace(/^[?#&]/,"")))return M;for(const A of y.split("&")){let[q,O]=v(_.decode?A.replace(/\+/g," "):A,"=");O=void 0===O?null:["comma","separator"].includes(_.arrayFormat)?O:It(O,_),R(It(q,_),O,M)}for(const A of Object.keys(M)){const q=M[A];if("object"==typeof q&&null!==q)for(const O of Object.keys(q))q[O]=Nt(q[O],_);else M[A]=Nt(q,_)}return!1===_.sort?M:(!0===_.sort?Object.keys(M).sort():Object.keys(M).sort(_.sort)).reduce((A,q)=>{const O=M[q];return A[q]=Boolean(O)&&"object"==typeof O&&!Array.isArray(O)?At(O):O,A},Object.create(null))}T.extract=Ot,T.parse=Ft,T.stringify=(y,_)=>{if(!y)return"";St((_=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},_)).arrayFormatSeparator);const R=O=>_.skipNull&&(y=>null==y)(y[O])||_.skipEmptyString&&""===y[O],M=function d(y){switch(y.arrayFormat){case"index":return _=>(R,M)=>{const A=R.length;return void 0===M||y.skipNull&&null===M||y.skipEmptyString&&""===M?R:null===M?[...R,[F(_,y),"[",A,"]"].join("")]:[...R,[F(_,y),"[",F(A,y),"]=",F(M,y)].join("")]};case"bracket":return _=>(R,M)=>void 0===M||y.skipNull&&null===M||y.skipEmptyString&&""===M?R:null===M?[...R,[F(_,y),"[]"].join("")]:[...R,[F(_,y),"[]=",F(M,y)].join("")];case"comma":case"separator":return _=>(R,M)=>null==M||0===M.length?R:0===R.length?[[F(_,y),"=",F(M,y)].join("")]:[[R,F(M,y)].join(y.arrayFormatSeparator)];default:return _=>(R,M)=>void 0===M||y.skipNull&&null===M||y.skipEmptyString&&""===M?R:null===M?[...R,F(_,y)]:[...R,[F(_,y),"=",F(M,y)].join("")]}}(_),A={};for(const O of Object.keys(y))R(O)||(A[O]=y[O]);const q=Object.keys(A);return!1!==_.sort&&q.sort(_.sort),q.map(O=>{const xt=y[O];return void 0===xt?"":null===xt?F(O,_):Array.isArray(xt)?xt.reduce(M(O),[]).join("&"):F(O,_)+"="+F(xt,_)}).filter(O=>O.length>0).join("&")},T.parseUrl=(y,_)=>{_=Object.assign({decode:!0},_);const[R,M]=v(y,"#");return Object.assign({url:R.split("?")[0]||"",query:Ft(Ot(y),_)},_&&_.parseFragmentIdentifier&&M?{fragmentIdentifier:It(M,_)}:{})},T.stringifyUrl=(y,_)=>{_=Object.assign({encode:!0,strict:!0},_);const R=kt(y.url).split("?")[0]||"",M=T.extract(y.url),A=T.parse(M,{sort:!1}),q=Object.assign(A,y.query);let O=T.stringify(q,_);O&&(O=`?${O}`);let xt=function Pt(y){let _="";const R=y.indexOf("#");return-1!==R&&(_=y.slice(R)),_}(y.url);return y.fragmentIdentifier&&(xt=`#${F(y.fragmentIdentifier,_)}`),`${R}${O}${xt}`}},7407:Rt=>{"use strict";Rt.exports=T=>encodeURIComponent(T).replace(/[!'()*]/g,I=>`%${I.charCodeAt(0).toString(16).toUpperCase()}`)},65361:Rt=>{"use strict";var T="%[a-f0-9]{2}",I=new RegExp("("+T+")|([^%]+?)","gi"),U=new RegExp("("+T+")+","gi");function E(d,L){try{return[decodeURIComponent(d.join(""))]}catch{}if(1===d.length)return d;var St=d.slice(0,L=L||1),F=d.slice(L);return Array.prototype.concat.call([],E(St),E(F))}function v(d){try{return decodeURIComponent(d)}catch{for(var L=d.match(I)||[],St=1;St<L.length;St++)L=(d=E(L,St).join("")).match(I)||[];return d}}Rt.exports=function(d){if("string"!=typeof d)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof d+"`");try{return d=d.replace(/\+/g," "),decodeURIComponent(d)}catch{return function N(d){for(var L={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},St=U.exec(d);St;){try{L[St[0]]=decodeURIComponent(St[0])}catch{var F=v(St[0]);F!==St[0]&&(L[St[0]]=F)}St=U.exec(d)}L["%C2"]="\ufffd";for(var It=Object.keys(L),At=0;At<It.length;At++){var kt=It[At];d=d.replace(new RegExp(kt,"g"),L[kt])}return d}(d)}}},16658:Rt=>{Rt.exports=U,U.strict=E,U.loose=v;var T=Object.prototype.toString,I={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0};function U(N){return E(N)||v(N)}function E(N){return N instanceof Int8Array||N instanceof Int16Array||N instanceof Int32Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Uint16Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array}function v(N){return I[T.call(N)]}},95967:Rt=>{"use strict";Rt.exports=(T,I)=>{if("string"!=typeof T||"string"!=typeof I)throw new TypeError("Expected the arguments to be of type `string`");if(""===I)return[T];const U=T.indexOf(I);return-1===U?[T]:[T.slice(0,U),T.slice(U+I.length)]}},15343:(Rt,T,I)=>{var U=I(16658).strict;Rt.exports=function(v){if(U(v)){var N=Buffer.from(v.buffer);return v.byteLength!==v.buffer.byteLength&&(N=N.slice(v.byteOffset,v.byteOffset+v.byteLength)),N}return Buffer.from(v)}},36563:()=>{}}]);