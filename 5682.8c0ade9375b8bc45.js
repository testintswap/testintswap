"use strict";(self.webpackChunkintswap_frontend=self.webpackChunkintswap_frontend||[]).push([[5682],{65682:(De,K,m)=>{m.r(K),m.d(K,{AlchemyProvider:()=>G,AlchemyWebSocketProvider:()=>ee,AnkrProvider:()=>te,BaseProvider:()=>j.Zk,CloudflareProvider:()=>oe,EtherscanProvider:()=>ce,FallbackProvider:()=>de,Formatter:()=>k.Mb,InfuraProvider:()=>$,InfuraWebSocketProvider:()=>fe,IpcProvider:()=>he,JsonRpcBatchProvider:()=>xe,JsonRpcProvider:()=>P.r,JsonRpcSigner:()=>P.C,NodesmithProvider:()=>ge,PocketProvider:()=>be,Provider:()=>V.zt,Resolver:()=>j.H2,StaticJsonRpcProvider:()=>Q,UrlJsonRpcProvider:()=>v,Web3Provider:()=>we.Q,WebSocketProvider:()=>L,getDefaultProvider:()=>Be,getNetwork:()=>X.H,isCommunityResourcable:()=>k.Ed,isCommunityResource:()=>k.Gp,showThrottleMessage:()=>k.vh});var V=m(12653),X=m(51945),j=m(62645),f=m(26764),k=m(55175),Z=m(2024),P=m(61522),h=m(33461),w=m(5102);let T=null;try{if(T=WebSocket,null==T)throw new Error("inject please")}catch{const t=new h.Logger(w.i);T=function(){t.throwError("WebSockets not supported in this environment",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var F=function(n,t,e,r){return new(e||(e=Promise))(function(i,s){function l(a){try{u(r.next(a))}catch(g){s(g)}}function c(a){try{u(r.throw(a))}catch(g){s(g)}}function u(a){a.done?i(a.value):function o(i){return i instanceof e?i:new e(function(s){s(i)})}(a.value).then(l,c)}u((r=r.apply(n,t||[])).next())})};const C=new h.Logger(w.i);let ve=1;class L extends P.r{constructor(t,e){"any"===e&&C.throwError("WebSocketProvider does not support 'any' network yet",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super("string"==typeof t?t:"_websocket",e),this._pollingInterval=-1,this._wsReady=!1,(0,f.defineReadOnly)(this,"_websocket","string"==typeof t?new T(this.connection.url):t),(0,f.defineReadOnly)(this,"_requests",{}),(0,f.defineReadOnly)(this,"_subs",{}),(0,f.defineReadOnly)(this,"_subIds",{}),(0,f.defineReadOnly)(this,"_detectNetwork",super.detectNetwork()),this.websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(o=>{this.websocket.send(this._requests[o].payload)})},this.websocket.onmessage=o=>{const i=o.data,s=JSON.parse(i);if(null!=s.id){const l=String(s.id),c=this._requests[l];if(delete this._requests[l],void 0!==s.result)c.callback(null,s.result),this.emit("debug",{action:"response",request:JSON.parse(c.payload),response:s.result,provider:this});else{let u=null;s.error?(u=new Error(s.error.message||"unknown error"),(0,f.defineReadOnly)(u,"code",s.error.code||null),(0,f.defineReadOnly)(u,"response",i)):u=new Error("unknown error"),c.callback(u,void 0),this.emit("debug",{action:"response",error:u,request:JSON.parse(c.payload),provider:this})}}else if("eth_subscription"===s.method){const l=this._subs[s.params.subscription];l&&l.processFunc(s.params.result)}else console.warn("this should not happen")};const r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}get websocket(){return this._websocket}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(t){C.throwError("cannot reset events block on WebSocketProvider",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(t){C.throwError("cannot set polling interval on WebSocketProvider",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return F(this,void 0,void 0,function*(){return null})}set polling(t){!t||C.throwError("cannot set polling on WebSocketProvider",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(t,e){const r=ve++;return new Promise((o,i)=>{const l=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(l),provider:this}),this._requests[String(r)]={callback:function s(c,u){return c?i(c):o(u)},payload:l},this._wsReady&&this.websocket.send(l)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(t,e,r){return F(this,void 0,void 0,function*(){let o=this._subIds[t];null==o&&(o=Promise.all(e).then(s=>this.send("eth_subscribe",s)),this._subIds[t]=o);const i=yield o;this._subs[i]={tag:t,processFunc:r}})}_startEvent(t){switch(t.type){case"block":this._subscribe("block",["newHeads"],e=>{const r=Z.O$.from(e.number).toNumber();this._emitted.block=r,this.emit("block",r)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],e=>{null==e.removed&&(e.removed=!1),this.emit(t.filter,this.formatter.filterLog(e))});break;case"tx":{const e=r=>{const o=r.hash;this.getTransactionReceipt(o).then(i=>{!i||this.emit(o,i)})};e(t),this._subscribe("tx",["newHeads"],r=>{this._events.filter(o=>"tx"===o.type).forEach(e)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t)}}_stopEvent(t){let e=t.tag;if("tx"===t.type){if(this._events.filter(o=>"tx"===o.type).length)return;e="tx"}else if(this.listenerCount(t.event))return;const r=this._subIds[e];!r||(delete this._subIds[e],r.then(o=>{!this._subs[o]||(delete this._subs[o],this.send("eth_unsubscribe",[o]))}))}destroy(){return F(this,void 0,void 0,function*(){this.websocket.readyState===T.CONNECTING&&(yield new Promise(t=>{this.websocket.onopen=function(){t(!0)},this.websocket.onerror=function(){t(!1)}})),this.websocket.close(1e3)})}}const I=new h.Logger(w.i);class Q extends P.r{detectNetwork(){const t=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return function(n,t,e,r){return new(e||(e=Promise))(function(i,s){function l(a){try{u(r.next(a))}catch(g){s(g)}}function c(a){try{u(r.throw(a))}catch(g){s(g)}}function u(a){a.done?i(a.value):function o(i){return i instanceof e?i:new e(function(s){s(i)})}(a.value).then(l,c)}u((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){let e=this.network;return null==e&&(e=yield t.detectNetwork.call(this),e||I.throwError("no network detected",h.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&((0,f.defineReadOnly)(this,"_network",e),this.emit("network",e,null))),e})}}class v extends Q{constructor(t,e){I.checkAbstract(new.target,v),t=(0,f.getStatic)(new.target,"getNetwork")(t),e=(0,f.getStatic)(new.target,"getApiKey")(e),super((0,f.getStatic)(new.target,"getUrl")(t,e),t),"string"==typeof e?(0,f.defineReadOnly)(this,"apiKey",e):null!=e&&Object.keys(e).forEach(o=>{(0,f.defineReadOnly)(this,o,e[o])})}_startPending(){I.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(t){return I.throwError("API provider does not support signing",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(t){return t}static getUrl(t,e){return I.throwError("not implemented; sub-classes must override getUrl",h.Logger.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}const Y=new h.Logger(w.i),x="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class ee extends L{constructor(t,e){const r=new G(t,e);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),(0,f.defineReadOnly)(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===x}}class G extends v{static getWebSocketProvider(t,e){return new ee(t,e)}static getApiKey(t){return null==t?x:(t&&"string"!=typeof t&&Y.throwArgumentError("invalid apiKey","apiKey",t),t)}static getUrl(t,e){let r=null;switch(t.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.g.alchemy.com/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:Y.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+e,throttleCallback:(o,i)=>(e===x&&(0,k.vh)(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===x}}const Pe=new h.Logger(w.i),U="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function Re(n){switch(n){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return Pe.throwArgumentError("unsupported network","name",n)}class te extends v{isCommunityResource(){return this.apiKey===U}static getApiKey(t){return t??U}static getUrl(t,e){null==e&&(e=U);const r={allowGzip:!0,url:"https://"+Re(t.name)+e,throttleCallback:(o,i)=>(e.apiKey===U&&(0,k.vh)(),Promise.resolve(!0))};return null!=e.projectSecret&&(r.user="",r.password=e.projectSecret),r}}const re=new h.Logger(w.i);class oe extends v{static getApiKey(t){return null!=t&&re.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}static getUrl(t,e){let r=null;return"homestead"===t.name?r="https://cloudflare-eth.com/":re.throwArgumentError("unsupported network","network",arguments[0]),r}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return function(n,t,e,r){return new(e||(e=Promise))(function(i,s){function l(a){try{u(r.next(a))}catch(g){s(g)}}function c(a){try{u(r.throw(a))}catch(g){s(g)}}function u(a){a.done?i(a.value):function o(i){return i instanceof e?i:new e(function(s){s(i)})}(a.value).then(l,c)}u((r=r.apply(n,t||[])).next())})}(this,void 0,void 0,function*(){return"getBlockNumber"===t?(yield r.perform.call(this,"getBlock",{blockTag:"latest"})).number:r.perform.call(this,t,e)})}}var y=m(31347),Se=m(58483),q=m(37890),B=function(n,t,e,r){return new(e||(e=Promise))(function(i,s){function l(a){try{u(r.next(a))}catch(g){s(g)}}function c(a){try{u(r.throw(a))}catch(g){s(g)}}function u(a){a.done?i(a.value):function o(i){return i instanceof e?i:new e(function(s){s(i)})}(a.value).then(l,c)}u((r=r.apply(n,t||[])).next())})};const E=new h.Logger(w.i);function ne(n){const t={};for(let e in n){if(null==n[e])continue;let r=n[e];"type"===e&&0===r||(r={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[e]?(0,y.hexValue)((0,y.hexlify)(r)):"accessList"===e?"["+(0,Se.accessListify)(r).map(o=>`{address:"${o.address}",storageKeys:["${o.storageKeys.join('","')}"]}`).join(",")+"]":(0,y.hexlify)(r),t[e]=r)}return t}function _e(n){if(0==n.status&&("No records found"===n.message||"No transactions found"===n.message))return n.result;if(1!=n.status||"string"!=typeof n.message||!n.message.match(/^OK/)){const t=new Error("invalid response");throw t.result=JSON.stringify(n),(n.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return n.result}function ie(n){if(n&&0==n.status&&"NOTOK"==n.message&&(n.result||"").toLowerCase().indexOf("rate limit")>=0){const t=new Error("throttled response");throw t.result=JSON.stringify(n),t.throttleRetry=!0,t}if("2.0"!=n.jsonrpc){const t=new Error("invalid response");throw t.result=JSON.stringify(n),t}if(n.error){const t=new Error(n.error.message||"unknown error");throw n.error.code&&(t.code=n.error.code),n.error.data&&(t.data=n.error.data),t}return n.result}function se(n){if("pending"===n)throw new Error("pending not supported");return"latest"===n?n:parseInt(n.substring(2),16)}function M(n,t,e){if("call"===n&&t.code===h.Logger.errors.SERVER_ERROR){const o=t.error;if(o&&(o.message.match(/reverted/i)||o.message.match(/VM execution error/i))){let i=o.data;if(i&&(i="0x"+i.replace(/^.*0x/i,"")),(0,y.isHexString)(i))return i;E.throwError("missing revert data in call exception",h.Logger.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let r=t.message;throw t.code===h.Logger.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?r=t.error.message:"string"==typeof t.body?r=t.body:"string"==typeof t.responseText&&(r=t.responseText)),r=(r||"").toLowerCase(),r.match(/insufficient funds/)&&E.throwError("insufficient funds for intrinsic transaction cost",h.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:n,transaction:e}),r.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&E.throwError("nonce has already been used",h.Logger.errors.NONCE_EXPIRED,{error:t,method:n,transaction:e}),r.match(/another transaction with same nonce/)&&E.throwError("replacement fee too low",h.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:n,transaction:e}),r.match(/execution failed due to an exception|execution reverted/)&&E.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",h.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:n,transaction:e}),t}class ce extends j.Zk{constructor(t,e){super(t),(0,f.defineReadOnly)(this,"baseUrl",this.getBaseUrl()),(0,f.defineReadOnly)(this,"apiKey",e||null)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"sepolia":return"https://api-sepolia.etherscan.io";case"matic":return"https://api.polygonscan.com";case"maticmum":return"https://api-testnet.polygonscan.com";case"arbitrum":return"https://api.arbiscan.io";case"arbitrum-goerli":return"https://api-goerli.arbiscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-goerli":return"https://api-goerli-optimistic.etherscan.io"}return E.throwArgumentError("unsupported network","network",this.network.name)}getUrl(t,e){const r=Object.keys(e).reduce((i,s)=>{const l=e[s];return null!=l&&(i+=`&${s}=${l}`),i},"");return`${this.baseUrl}/api?module=${t}${r}${this.apiKey?`&apikey=${this.apiKey}`:""}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(t,e){return e.module=t,e.apikey=this.apiKey,e}fetch(t,e,r){return B(this,void 0,void 0,function*(){const o=r?this.getPostUrl():this.getUrl(t,e),i=r?this.getPostData(t,e):null,s="proxy"===t?ie:_e;this.emit("debug",{action:"request",request:o,provider:this});const l={url:o,throttleSlotInterval:1e3,throttleCallback:(a,g)=>(this.isCommunityResource()&&(0,k.vh)(),Promise.resolve(!0))};let c=null;i&&(l.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(i).map(a=>`${a}=${i[a]}`).join("&"));const u=yield(0,q.fetchJson)(l,c,s||ie);return this.emit("debug",{action:"response",request:o,response:(0,f.deepCopy)(u),provider:this}),u})}detectNetwork(){return B(this,void 0,void 0,function*(){return this.network})}perform(t,e){const r=Object.create(null,{perform:{get:()=>super.perform}});return B(this,void 0,void 0,function*(){switch(t){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch(o=>M("sendTransaction",o,e.signedTransaction));case"getBlock":if(e.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"});throw new Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash});case"call":{if("latest"!==e.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");const o=ne(e.transaction);o.module="proxy",o.action="eth_call";try{return yield this.fetch("proxy",o,!0)}catch(i){return M("call",i,e.transaction)}}case"estimateGas":{const o=ne(e.transaction);o.module="proxy",o.action="eth_estimateGas";try{return yield this.fetch("proxy",o,!0)}catch(i){return M("estimateGas",i,e.transaction)}}case"getLogs":{const o={action:"getLogs"};if(e.filter.fromBlock&&(o.fromBlock=se(e.filter.fromBlock)),e.filter.toBlock&&(o.toBlock=se(e.filter.toBlock)),e.filter.address&&(o.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&E.throwError("unsupported topic count",h.Logger.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),1===e.filter.topics.length)){const l=e.filter.topics[0];("string"!=typeof l||66!==l.length)&&E.throwError("unsupported topic format",h.Logger.errors.UNSUPPORTED_OPERATION,{topic0:l}),o.topic0=l}const i=yield this.fetch("logs",o);let s={};for(let l=0;l<i.length;l++){const c=i[l];if(null==c.blockHash){if(null==s[c.blockNumber]){const u=yield this.getBlock(c.blockNumber);u&&(s[c.blockNumber]=u.hash)}c.blockHash=s[c.blockNumber]}}return i}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,t,e)})}getHistory(t,e,r){return B(this,void 0,void 0,function*(){const o={action:"txlist",address:yield this.resolveName(t),startblock:e??0,endblock:r??99999999,sort:"asc"};return(yield this.fetch("account",o)).map(s=>{["contractAddress","to"].forEach(function(c){""==s[c]&&delete s[c]}),null==s.creates&&null!=s.contractAddress&&(s.creates=s.contractAddress);const l=this.formatter.transactionResponse(s);return s.timeStamp&&(l.timestamp=parseInt(s.timeStamp)),l})})}isCommunityResource(){return null==this.apiKey}}var Te=m(34820),D=function(n,t,e,r){return new(e||(e=Promise))(function(i,s){function l(a){try{u(r.next(a))}catch(g){s(g)}}function c(a){try{u(r.throw(a))}catch(g){s(g)}}function u(a){a.done?i(a.value):function o(i){return i instanceof e?i:new e(function(s){s(i)})}(a.value).then(l,c)}u((r=r.apply(n,t||[])).next())})};const R=new h.Logger(w.i);function W(){return(new Date).getTime()}function ae(n){let t=null;for(let e=0;e<n.length;e++){const r=n[e];if(null==r)return null;t?t.name===r.name&&t.chainId===r.chainId&&(t.ensAddress===r.ensAddress||null==t.ensAddress&&null==r.ensAddress)||R.throwArgumentError("provider mismatch","networks",n):t=r}return t}function le(n,t){n=n.slice().sort();const e=Math.floor(n.length/2);if(n.length%2)return n[e];const r=n[e-1],o=n[e];return null!=t&&Math.abs(r-o)>t?null:(r+o)/2}function S(n){if(null===n)return"null";if("number"==typeof n||"boolean"==typeof n)return JSON.stringify(n);if("string"==typeof n)return n;if(Z.O$.isBigNumber(n))return n.toString();if(Array.isArray(n))return JSON.stringify(n.map(t=>S(t)));if("object"==typeof n){const t=Object.keys(n);return t.sort(),"{"+t.map(e=>{let r=n[e];return r="function"==typeof r?"[function]":S(r),JSON.stringify(e)+":"+r}).join(",")+"}"}throw new Error("unknown value type: "+typeof n)}let Ie=1;function ue(n){let t=null,e=null,r=new Promise(s=>{t=function(){e&&(clearTimeout(e),e=null),s()},e=setTimeout(t,n)});return{cancel:t,getPromise:function i(){return r},wait:s=>(r=r.then(s),r)}}const Oe=[h.Logger.errors.CALL_EXCEPTION,h.Logger.errors.INSUFFICIENT_FUNDS,h.Logger.errors.NONCE_EXPIRED,h.Logger.errors.REPLACEMENT_UNDERPRICED,h.Logger.errors.UNPREDICTABLE_GAS_LIMIT],Ae=["address","args","errorArgs","errorSignature","method","transaction"];function H(n,t){const e={weight:n.weight};return Object.defineProperty(e,"provider",{get:()=>n.provider}),n.start&&(e.start=n.start),t&&(e.duration=t-n.start),n.done&&(n.error?e.error=n.error:e.result=n.result||null),e}function O(n,t){return D(this,void 0,void 0,function*(){const e=n.provider;return null!=e.blockNumber&&e.blockNumber>=t||-1===t?e:(0,q.poll)(()=>new Promise((r,o)=>{setTimeout(function(){return r(e.blockNumber>=t?e:n.cancelled?null:void 0)},0)}),{oncePoll:e})})}function Le(n,t,e,r){return D(this,void 0,void 0,function*(){let o=n.provider;switch(e){case"getBlockNumber":case"getGasPrice":return o[e]();case"getEtherPrice":if(o.getEtherPrice)return o.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return r.blockTag&&(0,y.isHexString)(r.blockTag)&&(o=yield O(n,t)),o[e](r.address,r.blockTag||"latest");case"getStorageAt":return r.blockTag&&(0,y.isHexString)(r.blockTag)&&(o=yield O(n,t)),o.getStorageAt(r.address,r.position,r.blockTag||"latest");case"getBlock":return r.blockTag&&(0,y.isHexString)(r.blockTag)&&(o=yield O(n,t)),o[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash);case"call":case"estimateGas":return r.blockTag&&(0,y.isHexString)(r.blockTag)&&(o=yield O(n,t)),"call"===e&&r.blockTag?o[e](r.transaction,r.blockTag):o[e](r.transaction);case"getTransaction":case"getTransactionReceipt":return o[e](r.transactionHash);case"getLogs":{let i=r.filter;return(i.fromBlock&&(0,y.isHexString)(i.fromBlock)||i.toBlock&&(0,y.isHexString)(i.toBlock))&&(o=yield O(n,t)),o.getLogs(i)}}return R.throwError("unknown method error",h.Logger.errors.UNKNOWN_ERROR,{method:e,params:r})})}class de extends j.Zk{constructor(t,e){0===t.length&&R.throwArgumentError("missing providers","providers",t);const r=t.map((s,l)=>{if(V.zt.isProvider(s)){const a=(0,k.Gp)(s)?2e3:750;return Object.freeze({provider:s,weight:1,stallTimeout:a,priority:1})}const c=(0,f.shallowCopy)(s);null==c.priority&&(c.priority=1),null==c.stallTimeout&&(c.stallTimeout=(0,k.Gp)(s)?2e3:750),null==c.weight&&(c.weight=1);const u=c.weight;return(u%1||u>512||u<1)&&R.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${l}].weight`,u),Object.freeze(c)}),o=r.reduce((s,l)=>s+l.weight,0);null==e?e=o/2:e>o&&R.throwArgumentError("quorum will always fail; larger than total weight","quorum",e);let i=ae(r.map(s=>s.provider.network));null==i&&(i=new Promise((s,l)=>{setTimeout(()=>{this.detectNetwork().then(s,l)},0)})),super(i),(0,f.defineReadOnly)(this,"providerConfigs",Object.freeze(r)),(0,f.defineReadOnly)(this,"quorum",e),this._highestBlockNumber=-1}detectNetwork(){return D(this,void 0,void 0,function*(){return ae(yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork())))})}perform(t,e){return D(this,void 0,void 0,function*(){if("sendTransaction"===t){const c=yield Promise.all(this.providerConfigs.map(u=>u.provider.sendTransaction(e.signedTransaction).then(a=>a.hash,a=>a)));for(let u=0;u<c.length;u++){const a=c[u];if("string"==typeof a)return a}throw c[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==t&&(yield this.getBlockNumber());const r=function Ce(n,t,e){let r=S;switch(t){case"getBlockNumber":return function(o){const i=o.map(l=>l.result);let s=le(o.map(l=>l.result),2);if(null!=s)return s=Math.ceil(s),i.indexOf(s+1)>=0&&s++,s>=n._highestBlockNumber&&(n._highestBlockNumber=s),n._highestBlockNumber};case"getGasPrice":return function(o){const i=o.map(s=>s.result);return i.sort(),i[Math.floor(i.length/2)]};case"getEtherPrice":return function(o){return le(o.map(i=>i.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(o){return null==o?null:((o=(0,f.shallowCopy)(o)).confirmations=-1,S(o))};break;case"getBlock":r=e.includeTransactions?function(o){return null==o?null:((o=(0,f.shallowCopy)(o)).transactions=o.transactions.map(i=>((i=(0,f.shallowCopy)(i)).confirmations=-1,i)),S(o))}:function(o){return null==o?null:S(o)};break;default:throw new Error("unknown method: "+t)}return function je(n,t){return function(e){const r={};e.forEach(i=>{const s=n(i.result);r[s]||(r[s]={count:0,result:i.result}),r[s].count++});const o=Object.keys(r);for(let i=0;i<o.length;i++){const s=r[o[i]];if(s.count>=t)return s.result}}}(r,n.quorum)}(this,t,e),o=(0,Te.y)(this.providerConfigs.map(f.shallowCopy));o.sort((c,u)=>c.priority-u.priority);const i=this._highestBlockNumber;let s=0,l=!0;for(;;){const c=W();let u=o.filter(d=>d.runner&&c-d.start<d.stallTimeout).reduce((d,p)=>d+p.weight,0);for(;u<this.quorum&&s<o.length;){const d=o[s++],p=Ie++;d.start=W(),d.staller=ue(d.stallTimeout),d.staller.wait(()=>{d.staller=null}),d.runner=Le(d,i,t,e).then(b=>{d.done=!0,d.result=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:H(d,W()),request:{method:t,params:(0,f.deepCopy)(e)},provider:this})},b=>{d.done=!0,d.error=b,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:H(d,W()),request:{method:t,params:(0,f.deepCopy)(e)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:p,backend:H(d,null),request:{method:t,params:(0,f.deepCopy)(e)},provider:this}),u+=d.weight}const a=[];o.forEach(d=>{d.done||!d.runner||(a.push(d.runner),d.staller&&a.push(d.staller.getPromise()))}),a.length&&(yield Promise.race(a));const g=o.filter(d=>d.done&&null==d.error);if(g.length>=this.quorum){const d=r(g);if(void 0!==d)return o.forEach(p=>{p.staller&&p.staller.cancel(),p.cancelled=!0}),d;l||(yield ue(100).getPromise()),l=!1}const _=o.reduce((d,p)=>{if(!p.done||null==p.error)return d;const b=p.error.code;return Oe.indexOf(b)>=0&&(d[b]||(d[b]={error:p.error,weight:0}),d[b].weight+=p.weight),d},{});if(Object.keys(_).forEach(d=>{const p=_[d];if(p.weight<this.quorum)return;o.forEach(N=>{N.staller&&N.staller.cancel(),N.cancelled=!0});const b=p.error,ye={};Ae.forEach(N=>{null!=b[N]&&(ye[N]=b[N])}),R.throwError(b.reason||b.message,d,ye)}),0===o.filter(d=>!d.done).length)break}return o.forEach(c=>{c.staller&&c.staller.cancel(),c.cancelled=!0}),R.throwError("failed to meet quorum",h.Logger.errors.SERVER_ERROR,{method:t,params:e,results:o.map(c=>H(c)),provider:this})})}}const he=null,J=new h.Logger(w.i),A="84842078b09946638c03157f83405213";class fe extends L{constructor(t,e){const r=new $(t,e),o=r.connection;o.password&&J.throwError("INFURA WebSocket project secrets unsupported",h.Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(o.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),t),(0,f.defineReadOnly)(this,"apiKey",r.projectId),(0,f.defineReadOnly)(this,"projectId",r.projectId),(0,f.defineReadOnly)(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===A}}class $ extends v{static getWebSocketProvider(t,e){return new fe(t,e)}static getApiKey(t){const e={apiKey:A,projectId:A,projectSecret:null};return null==t||("string"==typeof t?e.projectId=t:null!=t.projectSecret?(J.assertArgument("string"==typeof t.projectId,"projectSecret requires a projectId","projectId",t.projectId),J.assertArgument("string"==typeof t.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"goerli":r="goerli.infura.io";break;case"sepolia":r="sepolia.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-goerli":r="optimism-goerli.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-goerli":r="arbitrum-goerli.infura.io";break;default:J.throwError("unsupported network",h.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const o={allowGzip:!0,url:"https://"+r+"/v3/"+e.projectId,throttleCallback:(i,s)=>(e.projectId===A&&(0,k.vh)(),Promise.resolve(!0))};return null!=e.projectSecret&&(o.user="",o.password=e.projectSecret),o}isCommunityResource(){return this.projectId===A}}class xe extends P.r{send(t,e){const r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);const o={request:r,resolve:null,reject:null},i=new Promise((s,l)=>{o.resolve=s,o.reject=l});return this._pendingBatch.push(o),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{const s=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;const l=s.map(c=>c.request);return this.emit("debug",{action:"requestBatch",request:(0,f.deepCopy)(l),provider:this}),(0,q.fetchJson)(this.connection,JSON.stringify(l)).then(c=>{this.emit("debug",{action:"response",request:l,response:c,provider:this}),s.forEach((u,a)=>{const g=c[a];if(g.error){const _=new Error(g.error.message);_.code=g.error.code,_.data=g.error.data,u.reject(_)}else u.resolve(g.result)})},c=>{this.emit("debug",{action:"response",error:c,request:l,provider:this}),s.forEach(u=>{u.reject(c)})})},10)),i}}const z=new h.Logger(w.i);class ge extends v{static getApiKey(t){return t&&"string"!=typeof t&&z.throwArgumentError("invalid apiKey","apiKey",t),t||"ETHERS_JS_SHARED"}static getUrl(t,e){z.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(t.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:z.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+e}}const pe=new h.Logger(w.i),me="62e1ad51b37b8e00394bda3b";class be extends v{static getApiKey(t){const e={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==t?e.applicationId=me:"string"==typeof t?e.applicationId=t:null!=t.applicationSecretKey?(e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey):t.applicationId?e.applicationId=t.applicationId:pe.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}static getUrl(t,e){let r=null;switch(t?t.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:pe.throwError("unsupported network",h.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:t})}const i={headers:{},url:`https://${r}/v1/lb/${e.applicationId}`};return null!=e.applicationSecretKey&&(i.user="",i.password=e.applicationSecretKey),i}isCommunityResource(){return this.applicationId===me}}var we=m(59267);const ke=new h.Logger(w.i);function Be(n,t){if(null==n&&(n="homestead"),"string"==typeof n){const r=n.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new P.r(n);case"ws":case"wss":return new L(n);default:ke.throwArgumentError("unsupported URL scheme","network",n)}}const e=(0,X.H)(n);return(!e||!e._defaultProvider)&&ke.throwError("unsupported getDefaultProvider network",h.Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:n}),e._defaultProvider({FallbackProvider:de,AlchemyProvider:G,AnkrProvider:te,CloudflareProvider:oe,EtherscanProvider:ce,InfuraProvider:$,JsonRpcProvider:P.r,NodesmithProvider:ge,PocketProvider:be,Web3Provider:we.Q,IpcProvider:he},t)}}}]);